{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../src/Tooltip.svelte","../../src/Lock.svelte","../../node_modules/svelte/easing/index.mjs","../../node_modules/svelte/transition/index.mjs","../../node_modules/svelte/store/index.mjs","../../src/utils.js","../../src/stores.js","../../src/download.js","../../src/Navbar.svelte","../../src/AnimatedCOA.svelte","../../src/About.svelte","../../src/drag.js","../../src/Ordinary.svelte","../../src/dataModel.js","../../src/Charge.svelte","../../src/Grid.svelte","../../src/Positions.svelte","../../src/COA.svelte","../../src/MenuItem.svelte","../../src/EditorType.svelte","../../src/EditorSize.svelte","../../src/EditorTincture.svelte","../../src/Switch.svelte","../../src/EditorShift.svelte","../../src/EditorControlButtons.svelte","../../src/generator.js","../../src/Editor.svelte","../../src/Gallery.svelte","../../src/UploadRaster.svelte","../../src/UploadVector.svelte","../../src/Message.svelte","../../src/Patterns.svelte","../../src/App.svelte","../../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    const z_index = (parseInt(computed_style.zIndex) || 0) - 1;\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        `overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${z_index};`);\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.29.4' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","<script>\n  // Source: https://github.com/Abreu00/svelte-tooltip\n  export let tip = \"\", top = false, bottom = false, left = false, active = false, color = \"#222\";\n  let right = top || bottom || left ? false : true; // default side\n  let style = `background-color: ${color};`;\n</script>\n\n<div class=\"tooltip-wrapper\">\n  <span class=\"tooltip-slot\">\n    <slot/>\n  </span>\n  <div class=\"tooltip\" class:active class:left class:right class:bottom class:top>\n    {#if tip}\n      <div class=\"default-tip\" {style}>{tip}</div>\n    {:else}\n      <slot name=\"custom-tip\" />\n    {/if}\n  </div>\n</div>\n\n<style>\n  .tooltip-wrapper {\n    position: relative;\n    display: inline-block;\n    cursor: help;\n  }\n  .tooltip {\n    position: absolute;\n    display: inline-block;\n    color: inherit;\n    opacity: 0;\n    visibility: hidden;\n    text-transform: initial;\n    transition-delay: .5s;\n    transition-property: opacity;\n    transition-duration: 150ms;\n    z-index: 10;\n    width: max-content;\n    max-width: 50vw;\n  }\n\n  .default-tip {\n    display: inline-block;\n    padding: .5em .8em;\n    border-radius: .4em;\n    font-size: .9em;\n    color: inherit;\n  }\n\n  .tooltip.top {\n    left: 50%;\n    transform: translate(-50%, -100%);\n    margin-top: -8px;\n  }\n\n  .tooltip.bottom {\n    left: 50%;\n    bottom: 0;\n    transform: translate(-50%, 100%);\n    margin-bottom: -8px;\n  }\n\n  .tooltip.left {\n    left: 0;\n    transform: translateX(-100%);\n    margin-left: -8px;\n  }\n\n  .tooltip.right {\n    right: 0;\n    transform: translateX(100%);\n    margin-right: -8px;\n  }\n\n  .tooltip.active {\n    opacity: 1;\n    visibility: initial;\n  }\n\n  .tooltip-slot:hover + .tooltip {\n    opacity: 1;\n    visibility: initial;\n  }\n</style>","<script>\n  import Tooltip from './Tooltip.svelte';\n  export let key;\n  $: locked = localStorage.getItem(key);\n\n  function unlock() {\n    localStorage.removeItem(key);\n    locked = false;\n  }\n</script>\n\n{#if locked}\n  <Tooltip tip=\"Selected value will be used on app load. Click to apply default value on load\">\n    <span style=\"cursor: pointer\" on:click={unlock}>🔖</span>\n  </Tooltip>\n{/if}","export { identity as linear } from '../internal';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { cubicInOut, linear, cubicOut } from '../easing';\nimport { is_function, assign } from '../internal';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * amount}px);`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400, easing = linear }) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut }) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const height = parseFloat(style.height);\n    const padding_top = parseFloat(style.paddingTop);\n    const padding_bottom = parseFloat(style.paddingBottom);\n    const margin_top = parseFloat(style.marginTop);\n    const margin_bottom = parseFloat(style.marginBottom);\n    const border_top_width = parseFloat(style.borderTopWidth);\n    const border_bottom_width = parseFloat(style.borderBottomWidth);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => 'overflow: hidden;' +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `height: ${t * height}px;` +\n            `padding-top: ${t * padding_top}px;` +\n            `padding-bottom: ${t * padding_bottom}px;` +\n            `margin-top: ${t * margin_top}px;` +\n            `margin-bottom: ${t * margin_bottom}px;` +\n            `border-top-width: ${t * border_top_width}px;` +\n            `border-bottom-width: ${t * border_bottom_width}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut }) {\n    const len = node.getTotalLength();\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `stroke-dasharray: ${t * len} ${u * len}`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, {\n                rect: node.getBoundingClientRect()\n            });\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const { rect } = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(rect, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal';\nexport { get_store_value as get } from '../internal';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","// return random value from the array\nexport function ra(array) {\n  return array[Math.floor(Math.random() * array.length)];\n}\n\n// return random value from weighted array\nexport function rw(object) {\n  const array = [];\n  for (const key in object) {\n    for (let i = 0; i < object[key]; i++) {\n      array.push(key);\n    }\n  };\n  return array[Math.floor(Math.random() * array.length)];\n}\n\n// probability shorthand\nexport function P(probability) {\n  return Math.random() < probability;\n}\n\n// get camelCase string\nexport function camelize(str) {\n  return str\n    .replace(/\\.[^/.]+$/, \"\") // remove extension\n    .replace(/_/g, \" \") // replace _ by spaces\n    .replace(/\\W+(.)/g, (m, c) => c.toUpperCase()); // remove non-basic chars and camelize\n}","import { writable } from 'svelte/store';\nimport { ra, rw } from './utils.js';\n\nconst options = defineInitialOptions();\nexport const size = writable(options.size);\nexport const grad = writable(options.grad);\nexport const diaper = writable(options.diaper);\nexport const shield = writable(options.shield);\nexport const colors = writable(options.colors);\nexport const background = writable(options.background);\nexport const scale = writable(options.scale);\nexport const border = writable(options.border);\nexport const borderWidth = writable(options.borderWidth);\n\nexport const grid = writable(options.grid);\nexport const showGrid = writable(options.showGrid);\n\nexport const history = writable([]);\nexport const matrices = writable([]);\nexport const matrix = writable(0);\nexport const state = writable({ edit: 0, about: 0, i: 0 });\nexport const message = writable(null);\n\nconst createChangesTracker = () => {\n  const { subscribe, set, update } = writable([undefined, -1]);\n  let history = [],\n    position = -1;\n\n  return {\n    subscribe,\n\n    length: () => history.length,\n\n    reset: () => {\n      history = [], position = -1;\n      set([undefined, -1])\n    },\n\n    add(value) {\n      if (value === history[position]) return; // no change\n      if (position < history.length - 1) history = history.slice(0, position + 1); // cut future history\n      history.push(value);\n      position += 1;\n      set([history[position], position])\n    },\n\n    undo: () => update(p => {\n      if (position > 0) position -= 1;\n      return [history[position], position];\n    }),\n\n    redo: () => update(p => {\n      if (position < history.length - 1) position += 1;\n      return [history[position], position];\n    })\n  }\n}\nexport const changes = createChangesTracker();\n\nexport const loadedCharges = writable([]);\nexport const patterns = writable([]);\n\nfunction defineInitialOptions() {\n  const stored = key => {\n    const value = localStorage.getItem(key);\n    if (value === \"null\") return null;\n    return value;\n  };\n  const storedObj = key => localStorage.getItem(key) ? JSON.parse(localStorage.getItem(key)) : null;\n\n  const size = +stored(\"size\") || 200;\n  const diaper = stored(\"diaper\") || null;\n  const grad = stored(\"grad\") || ra([\"luster\", \"spotlight\", \"backlight\"]);\n  const shield = stored(\"shield\") || rw({ heater: 60, oldFrench: 20, spanish: 30, french: 5, swiss: 2, wedged: 2, italian: 1, round: 1, renaissance: 1, baroque: 1, polish: 1, german: 1, diamond: 1, kite: 1, square: 2, vesicaPiscis: 1, flag: 2, gonfalon: 3 });\n  const colors = storedObj(\"colors\") || { argent: \"#fafafa\", or: \"#ffe066\", gules: \"#d7374a\", sable: \"#333333\", azure: \"#377cd7\", vert: \"#26c061\", purpure: \"#522d5b\" };\n  const border = stored(\"border\") || \"#333333\";\n  const borderWidth = +stored(\"borderWidth\") || 1;\n  const background = stored(\"background\") || \"#333333\";\n  const scale = +stored(\"scale\") || 2;\n\n  const grid = +stored(\"grid\") || 1;\n  const showGrid = storedObj(\"showGrid\") || 0;\n\n  return { size, diaper, grad, shield, colors, border, borderWidth, background, scale, grid, showGrid };\n}","import {get} from 'svelte/store';\nimport {background, scale, shield, grad, diaper} from './stores';\n\nexport async function download(i) {\n  const coas = i ? [document.getElementById(\"coa\"+i)] : document.querySelectorAll(\"svg.coa\");\n  let width = +coas[0].getAttribute(\"width\");\n  let height = +coas[0].getAttribute(\"height\");\n  const numberX = coas.length > 1 ? Math.floor(window.innerWidth / width) : 1;\n  const numberY = coas.length > 1 ? Math.ceil(coas.length / numberX) : 1;\n\n  const scaleValue = get(scale);\n  width = Math.round(width * scaleValue);\n  height = Math.round(height * scaleValue);\n\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  canvas.width = width * numberX;\n  canvas.height = height * numberY;\n  ctx.fillStyle = get(background);\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  let loaded = 0;\n  coas.forEach(async function(svg, i) {\n    const url = await getURL(svg);\n    const img = new Image();\n    img.src = url;\n    img.onload = () => {\n      URL.revokeObjectURL(url);\n      ctx.drawImage(img, i % numberX * width, Math.floor(i / numberX) * height, width, height);\n      loaded ++;\n      if (loaded === coas.length) drawCanvas(canvas);\n    }\n  });\n}\n\nasync function getURL(svg) {\n  const clone = svg.cloneNode(true); // clone svg\n  const d = clone.getElementsByTagName(\"defs\")[0];\n\n  // remove grid if any\n  const grid = clone.getElementById(\"grid\");\n  const gridPattern = clone.getElementById(\"gridPattern\");\n  if (grid) grid.remove();\n  if (gridPattern) gridPattern.remove();\n\n  const sh = get(shield), gr = get(grad), di = get(diaper);\n  d.insertAdjacentHTML(\"beforeend\", defs.getElementById(sh).outerHTML);\n  if (gr) d.insertAdjacentHTML(\"beforeend\", defs.getElementById(gr).outerHTML);\n  if (di) d.insertAdjacentHTML(\"beforeend\", defs.getElementById(di).outerHTML);\n  clone.querySelectorAll(\".charge[charge]\").forEach(el => {\n    const charge = el.getAttribute(\"charge\");\n    d.insertAdjacentHTML(\"beforeend\", defs.getElementById(charge).outerHTML);\n  });\n  const fieldPattern = clone.getElementById(\"field\").getAttribute(\"fill\").split(\"(#\")[1]?.split(\")\")[0];\n  if (fieldPattern) d.insertAdjacentHTML(\"beforeend\", document.getElementById(fieldPattern).outerHTML);\n  const divisionPattern = clone.getElementById(\"division\")?.querySelector(\"rect\").getAttribute(\"fill\").split(\"(#\")[1]?.split(\")\")[0];\n  if (divisionPattern) d.insertAdjacentHTML(\"beforeend\", document.getElementById(divisionPattern).outerHTML);\n\n  const serialized = (new XMLSerializer()).serializeToString(clone);\n  const blob = new Blob([serialized], {type: 'image/svg+xml;charset=utf-8'});\n  const url = window.URL.createObjectURL(blob);\n  return url;\n}\n\nfunction drawCanvas(canvas) {\n  const link = document.createElement(\"a\");\n  link.download = \"armoria_download.png\";\n  canvas.toBlob(function(blob) {\n    console.log(blob);\n    link.href = window.URL.createObjectURL(blob);\n    document.body.appendChild(link);\n    link.click();\n    setTimeout(function() {\n      canvas.remove();\n      window.URL.revokeObjectURL(link.href);\n    }, 5000);\n  });\n}\n\n","<script>\n  import Tooltip from './Tooltip.svelte';\n  import Lock from './Lock.svelte';\n  import {fade} from 'svelte/transition';\n  import {download} from './download.js';\n  import {size, grad, diaper, shield, colors, background, scale, border, borderWidth, matrix, state, changes} from './stores';\n\n  const shields = [\"heater\", \"oldFrench\", \"spanish\", \"french\", \"swiss\", \"wedged\", \"italian\", \"round\", \"renaissance\", \"baroque\", \"polish\", \"german\", \"diamond\", \"kite\", \"vesicaPiscis\", \"square\", \"flag\", \"pennon\", \"guidon\", \"banner\", \"dovetail\", \"gonfalon\", \"pennant\"];\n  const paths = shields.map(id => document.getElementById(id).innerHTML);\n  const sizes = [[80, \"Giant\"], [100, \"Huge\"], [150, \"Large\"], [200, \"Medium\"], [300, \"Small\"], [400, \"Tiny\"]];\n  const gradients = [\"luster\", \"spotlight\", \"backlight\"];\n  const diapers = [\"nourse\", \"tessellation\", \"sennwald\", \"sulzbach\"];\n  const tinctures = [\"argent\", \"or\", \"gules\", \"sable\", \"azure\", \"vert\", \"purpure\"];\n  const defaultColors = {argent: \"#fafafa\", or: \"#ffe066\", gules: \"#d7374a\", sable: \"#333333\", azure: \"#377cd7\", vert: \"#26c061\", purpure: \"#522d5b\"};\n\n  const wideScreen = window.innerWidth > 600;\n\n  const icons = {\n    options: \"☰\",\n    rollback: \"⭯\",\n    reroll: \"⭮\",\n    download : \"⇩\",\n    upload : \"⇧\",\n    undo: \"⤺\",\n    redo: \"⤻\",\n    back: \"⮪\",\n    about: \"A\"\n  }\n\n  function label(i) {\n    if (wideScreen) return i;\n    return icons[i] || i;\n  }\n\n  $: position = $changes[1];\n  // save options on change\n  $: lock(\"size\", $size);\n  $: lock(\"grad\", $grad);\n  $: lock(\"diaper\", $diaper);\n  $: lock(\"shield\", $shield);\n  $: lock(\"colors\", JSON.stringify($colors));\n  $: lock(\"background\", $background);\n  $: lock(\"scale\", $scale);\n  $: lock(\"border\", $border);\n  $: lock(\"borderWidth\", $borderWidth);\n\n  // don't lock options on load\n  const loaded = [];\n  function lock(key, value) {\n    if (loaded.includes(key)) localStorage.setItem(key, value);\n    else loaded.push(key);\n  }\n\n  function getRandomColor() {\n    const l = '0123456789ABCDEF';\n    $background = \"#\"+[0,0,0,0,0,0].map(() => l[Math.floor(Math.random() * 16)]).join(\"\");\n  }\n</script>\n\n<div id=\"navbar\">\n  <ul>\n    {#if wideScreen}\n      <svg class=logo width=35 height=35 viewBox=\"-2 -1 55 55\">\n        <title>Armoria: Heraldry Generator</title>\n        <path fill=\"#fff\" stroke=\"none\" d=\"m 46,3 0.6,1.4 c -1.5,0.7 -2.6,1.4 -3.3,2.2 -0.7,0.7 -1.2,1.5 -1.5,2.4 -0.3,0.9 -0.4,2.2 -0.4,3.9 0,0.6 0,1.3 0,2.2 l 0.5,23.2 c 0,2.5 0.3,4.2 0.8,5 0.4,0.6 0.8,0.8 1.3,0.8 0.6,0 1.5,-0.6 2.8,-1.8 l 0.9,1.1 -5.8,4.9 -1.9,1.6 C 38.4,49.2 37.2,48.2 36.5,46.9 35.8,45.7 35.3,36.7 35.2,34 c -7.6,0.1 -20.2,0 -20.2,0 0,0 -7.4,9.1 -7.4,11.1 0,0.6 0.2,1.1 0.6,1.8 0.5,0.9 0.8,1.4 0.8,1.7 0,0.4 -0.1,0.7 -0.4,1 -0.3,0.3 -0.6,0.4 -1.1,0.4 -0.5,0 -0.9,-0.2 -1.2,-0.6 -0.5,-0.6 -0.7,-1.3 -0.7,-2.2 0,-1 0.3,-2.1 0.8,-3.3 C 8.8,39.9 11.3,36.7 14.1,32.9 11.1,30.7 9,28.5 7.8,26.4 6.6,24.4 6,22.1 6,19.5 c 0,-3 0.8,-5.7 2.3,-8.3 1.5,-2.5 3.8,-4.5 6.9,-6 3.1,-1.5 6.2,-2.2 9.4,-2.2 4.9,0 9.7,1.7 14.3,5.1 1.1,-1.2 2.2,-2.1 3.2,-2.9 1,-0.8 2.4,-1.5 4,-2.3 z M 30.7,10.2 c -2.6,-1.3 -5.2,-1.9 -7.8,-1.9 -2.7,0 -5.3,0.6 -7.8,1.8 -2.4,1.2 -4.2,2.8 -5.4,4.7 -1.2,1.9 -1.8,3.9 -1.8,5.9 0,4.2 2.3,8 6.9,11.3 L 25.2,17.7 c -1.6,-0.8 -2.9,-1.3 -4.2,-1.3 -1.7,0 -3.1,0.8 -4.2,2.4 -0.4,0.7 -1,0.5 -1.1,-0.2 0,-0.6 0.3,-1.5 1,-2.7 0.7,-1.1 1.6,-2.1 2.9,-2.8 1.3,-0.7 2.6,-1.1 4,-1.1 1.4,0 3.1,0.4 4.9,1.1 z m 4,3.2 C 34,12.4 32.8,11.5 32,11 L 18.4,29.4 h 16.7 z\"/>\n      </svg>\n    {/if}\n\n    <div class=\"container\"><bl>{label(\"options\")}</bl>\n\n      <div class=\"dropdown level1\">\n        <div class=\"container\">\n          <div class=\"dropdown level2 columns3 iconed\">\n            {#each shields as sh, i}\n              <bt on:click={() => $shield = sh}>\n                <svg class=shield class:selected={sh === $shield} width=26 height=26 viewBox=\"0 0 200 200\">{@html paths[i]}</svg>\n                {sh.split(/(?=[A-Z])/).join(\" \")}\n              </bt>\n            {/each}\n          </div>\n          <bl>\n            <Lock key=shield/>\n            <Tooltip tip=\"Shield or banner form. Some forms do not work well with auto-generated heralrdy\">Shield</Tooltip>\n          </bl>\n        </div>\n\n        <div class=\"container\">\n          <div class=\"dropdown level2\">\n            {#each tinctures as t}\n              <bl>{t}\n                {#if $colors[t] !== defaultColors[t]}\n                  <Tooltip tip=\"Restore default color\">\n                    <span on:click={() => $colors[t] = defaultColors[t]}>⭯ </span>\n                  </Tooltip>\n                {/if}\n                <input type=\"color\" bind:value={$colors[t]}/>\n              </bl>\n            {/each}\n          </div>\n          <bl>\n            <Lock key=colors/>\n            <Tooltip tip=\"Hue of tinctures and metals. Edit COA to change tincture or metal itself\">Colors</Tooltip>\n          </bl>\n        </div>\n\n        <div class=\"container\">\n          <div class=\"dropdown level2\">\n            <bt class:selected={!$grad} on:click={() => $grad = null}>No gradient</bt>\n            {#each gradients as g}\n              <bt class:selected={g === $grad} on:click={() => $grad = g}>{g}</bt>\n            {/each}\n          </div>\n          <bl>\n            <Lock key=grad/>\n            <Tooltip tip=\"Gradient (overlay) style to be applied over coat of arms\">Gradient</Tooltip>\n          </bl>\n        </div>\n\n        <div class=\"container\">\n          <div class=\"dropdown level2\">\n            <bt class:selected={!$diaper} on:click={() => $diaper = null}>No pattern</bt>\n            {#each diapers as d}\n              <bt class:selected={d === $diaper} on:click={() => $diaper = d}>{d}</bt>\n            {/each}\n          </div>\n          <bl>\n            <Lock key=diaper/>\n            <Tooltip tip=\"Diaper (subtle backing on coat of arms) style\">Damasking</Tooltip></bl>\n        </div>\n\n        <div class=\"container\">\n          <div class=\"dropdown level2\">\n            <bl>Color\n              {#if $border !== \"#333333\"}\n                <Tooltip tip=\"Restore default color\">\n                  <span on:click={() => $border = \"#333333\"}>⭯ </span>\n                </Tooltip>\n              {/if}\n              <input type=\"color\" bind:value={$border}/>\n            </bl>\n            <bl>Width\n              <input class=\"right\" type=\"number\" min=0 max=4 step=.1 bind:value={$borderWidth}/>\n            </bl>\n          </div>\n          <bl>\n            <Lock key=border/>\n            <Tooltip tip=\"Border style for coat of arms\">Border</Tooltip>\n          </bl>\n        </div>\n\n        <div class=\"container\">\n          <div class=\"dropdown level2\">\n            {#each sizes as s}\n              <bt class:selected={$size == s[0]} on:click={() => $size = s[0]}>{s[1]}</bt>\n            {/each}\n          </div>\n          <bl>\n            <Lock key=size/>\n            <Tooltip tip=\"Gallery size\">Gallery</Tooltip>\n          </bl>\n        </div>\n\n        <div class=\"container\">\n          <div class=\"dropdown level2\">\n            <bl>Color\n              <Tooltip tip=\"Select random color\">\n                <span on:click={getRandomColor}>⭮ </span>\n              </Tooltip>\n              {#if $background !== \"#333333\"}\n                <Tooltip tip=\"Restore default color\">\n                  <span on:click={() => $background = \"#333333\"}>⭯ </span>\n                </Tooltip>\n              {/if}\n              <input type=\"color\" bind:value={$background}/>\n            </bl>\n          </div>\n          <bl>\n            <Lock key=background/>\n            <Tooltip tip=\"Background color\">Background</Tooltip>\n          </bl>\n        </div>\n\n        <div class=\"container\">\n          <div class=\"dropdown level2\">\n            <bl class=\"wide\">\n              <input type=\"range\" min=1 max=4 step=.1 bind:value={$scale}/>\n              <input type=\"number\" min=1 max=4 step=.1 bind:value={$scale}/>\n            </bl>\n          </div>\n          <bl>\n            <Lock key=scale/>\n            <Tooltip tip=\"Downloaded image size, 1 is default size, 2 - 2x size, etc.\">Scale</Tooltip>\n          </bl>\n        </div>\n      </div>\n    </div>\n\n    {#if $matrix}\n    <bt on:click={() => $matrix -= 1}>\n      <Tooltip tip=\"Roll to the previous list. Hotkey: Backspace\">{label(\"rollback\")}</Tooltip>\n    </bt>\n    {:else}\n      <bd style=\"color: #333\">{label(\"rollback\")}</bd>\n    {/if}\n\n    <bt on:click={() => $matrix += 1}>\n      <Tooltip tip=\"Regenerate coat of arms. Hotkey: Enter\">{label(\"reroll\")}</Tooltip>\n    </bt>\n\n    <bt on:click={() => download()}>\n      <Tooltip tip=\"Download png image. Set size in options. Hotkey: D\">{label(\"download\")}</Tooltip>\n    </bt>\n\n    <div class=\"container\"><bl>{label(\"upload\")}</bl>\n      <div class=\"dropdown level1\">\n        <bt on:click={() => $state.raster = 1}>\n          <Tooltip tip=\"Upload raster charge (one color, quality loss on scale) from jpg, png or svg image\" left>Raster</Tooltip>\n        </bt>\n\n        <bt on:click={() => $state.vector = 1}>\n          <Tooltip tip=\"Upload vector charge (multicolor and lossless scalable) from prepared svg\" left>Vector</Tooltip>\n        </bt>\n      </div>\n    </div>\n\n    {#if $state.edit}\n      {#if position > 0}\n        <bt on:click={() => changes.undo()}>\n          <Tooltip tip=\"Revert the latest change. Hotkey: Z\">{label(\"undo\")}</Tooltip>\n        </bt>\n      {:else}\n        <bd style=\"color: #333\">{label(\"undo\")}</bd>\n      {/if}\n\n      {#if position < changes.length() - 1}\n        <bt on:click={() => changes.redo()}>\n          <Tooltip tip=\"Restore next change. Hotkey: X\">{label(\"redo\")}</Tooltip>\n        </bt>\n      {:else}\n        <bd style=\"color: #333\">{label(\"redo\")}</bd>\n      {/if}\n    {/if}\n\n    {#if $state.edit}\n      <bt id=\"back\" on:click={() => $state.edit = 0} transition:fade>\n        <Tooltip tip=\"Get back to Gallery\" left>{label(\"back\")}</Tooltip>\n      </bt>\n    {/if}\n\n    {#if wideScreen || !$state.edit}\n      <bt on:click={() => $state.about = 1}>\n        <Tooltip tip=\"Show about screen. Hotkey: F1\" left>{label(\"about\")}</Tooltip>\n      </bt>\n    {/if}\n  </ul>\n</div>\n\n<style>\n  ul {\n    top: 0;\n    width: 100%;\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n    display: flex;\n    align-items: center;\n    overflow: hidden;\n    background-color: #1b1c1d;\n    z-index: 1;\n  }\n\n  .logo {\n    margin: 0 .5em 0 1em;\n    background-color: #35bdb2;\n  }\n\n  bt, bl, bd {\n    user-select: none;\n    padding: 1em 1.14em;\n    line-height: 1.24;\n    color: #fff;\n    text-transform: capitalize;\n  }\n\n  bt {\n    cursor: pointer;\n    transition: background-color .1s;\n  }\n\n  bt:hover, bl:hover {\n    background-color: #2d2e2f;\n  }\n\n  bt:active, span:active {\n    transform: translateY(1px);\n  }\n\n  input[type=\"color\"] {\n    position: absolute;\n    padding: 0;\n    margin: -.3em 0;\n    right: 1em;\n    border: 0;\n    width: 3em;\n    cursor: pointer;\n  }\n\n  input[type=\"range\"] {\n    padding: 0;\n    width: 72%;\n    margin: 0;\n    height: .6em;\n    cursor: pointer;\n  }\n\n  input[type=\"number\"] {\n    padding: 0 0 0 3px;\n    width: 25%;\n    margin: 0;\n    border: 0;\n  }\n\n  input[type=\"number\"].right {\n    position: absolute;\n    padding: 2px;\n    margin: -.25em 0;\n    right: 1em;\n    width: 3em;\n  }\n\n  .dropdown {\n    display: none;\n    position: fixed;\n    background-color: #1b1c1d;\n    min-width: 10em;\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    z-index: 1;\n  }\n\n  .level1 {\n    margin-top: 1em;\n  }\n\n  .level2 {\n    z-index: 1;\n    margin-left: 10.25em;\n  }\n\n  .dropdown bt, .dropdown bl {\n    padding: 12px 16px;\n    width: 8em;\n    display: block;\n  }\n\n  .dropdown bl.wide {\n    width: 12em;\n  }\n\n  .container:hover > .dropdown {\n    display: block;\n  }\n\n  .dropdown bt.selected:before {\n    content: '\\2713';\n    display: inline-block;\n    padding: 0 6px 0 0;\n  }\n\n  .columns3 {\n    column-count: 3;\n  }\n\n  @media only screen and (max-width: 640px) {\n    .columns3 {\n      column-count: 1;\n    }\n\n    .dropdown bt, .dropdown bl {\n      padding: 8px 16px;\n    }\n  }\n\n  @media only screen and (max-height: 640px) {\n    .dropdown bt, .dropdown bl {\n      padding: 8px 16px;\n    }\n  }\n\n  .dropdown.iconed {\n    text-indent: 1.8em;\n  }\n\n  .shield {\n    position: absolute;\n    fill: none;\n    stroke: #fff;\n    stroke-width: 4px;\n    margin: -0.4em 0 0 -2.2em;\n  }\n\n  .shield.selected {\n    fill: #777;\n    stroke: #333;\n  }\n\n  span {\n    cursor: pointer;\n  }\n\n  #back {\n    position: absolute;\n    right: 0;\n  }\n</style>","<script>\n  import {colors} from './stores';\n  import {fade, draw} from 'svelte/transition';\n  import {rw} from './utils.js';\n  export let duration;\n  const delay = duration * 2.6;\n\n  const tinctures = {metals: {argent:3, or:2}, colors: {gules:5, sable:3, azure:4, vert:2, purpure:3}};\n  const metal = Math.random() > .5;\n  const t1 = metal ? rw(tinctures.metals) : rw(tinctures.colors);\n  const t2 = metal ? rw(tinctures.colors) : rw(tinctures.metals);\n\n  const division = rw({perPale:2, perFess:2, perBend:2, perBendSinister:1, perCross:6, perChevron:1, perChevronReversed:1, perPile:2, perSaltire:5, gyronny:1, chevronny:1});\n  const paths = {\n    perPale: [\"M100,25 v175\", \"M100,0 v200 h100 v-200 Z\"],\n    perFess: [\"M27.5,100 h145\", \"M0,100 h200 v100 h-200 Z\"],\n    perBend: [\"M0,0 l200,200\", \"M0,0 l200,200 h-200 Z\"],\n    perBendSinister: [\"M200,0 L0,200\", \"M200,0 L0,200 h200 Z\"],\n    perCross: [\"M100,25 v175 M27.5,100 h145\", \"M100,0 v200 h-100 v-100 h200 v-100 Z\"],\n    perChevron: [\"M0,0 l100,100 l100,-100\", \"M0,0 l100,100 l100,-100 Z\"],\n    perChevronReversed: [\"M0,200 l100,-100 l100,100\", \"M0,200 l100,-100 l100,100 Z\"],\n    perPile: [\"M15,0 l85,200 l85,-200\", \"M15,0 l85,200 l85,-200 Z\"],\n    perSaltire: [\"M0,0 L200,200 M200,0 l-200,200\", \"M0,0 L200,200 v-200 l-200,200 Z\"],\n    gyronny: [\"M0,0 l200,200 M200,100 h-200 M100,0 v200 M0,200 l200,-200\", \"M0,0 l200,200 v-100 h-200 h-100 M100,0 v200, h-100 l200,-200 h-100\"],\n    chevronny: [\"\", \"M0,80 100,-15 200,80 200,120 100,25 0,120z M0,160 100,65 200,160 200,200 100,105 0,200z M0,240 100,145 200,240 0,240z\"],\n  }\n\n  let size = window.innerWidth < 600 ? window.innerWidth * .9 : 500;\n  if (window.innerHeight < 600) size *= .5;\n</script>\n\n<svg width={size} height={size} viewBox=\"0 0 200 200\">\n  <g clip-path=\"url(#heater)\" stroke=\"#fff\" stroke-width=.5>\n    <path stroke-width=1 d=\"M25,25 h150 v50 a150,150,0,0,1,-75,125 a150,150,0,0,1,-75,-125 z\" in:draw=\"{{duration}}\"/>\n    <path d={paths[division][0]} in:draw=\"{{delay: duration}}\"/>\n\n    <g in:fade=\"{{delay, duration}}\" stroke=\"none\">\n      <rect x=0 y=0 width=200 height=200 fill={$colors[t1]}/>\n      <path d={paths[division][1]} fill={$colors[t2]}/>\n      <rect x=0 y=0 width=200 height=200 fill=\"url(#nourse)\"/>\n    </g>\n  </g>\n\n  <g stroke=\"#000\" fill=\"url(#backlight)\">\n    <path d=\"M25,25 h150 v50 a150,150,0,0,1,-75,125 a150,150,0,0,1,-75,-125 z\" in:draw=\"{{delay, duration}}\"/>\n  </g>\n</svg>","<script>\n  import AnimatedCOA from './AnimatedCOA.svelte';\n  import {state} from './stores';\n  import {fade, fly} from 'svelte/transition';\n  const duration = 1000;\n</script>\n\n<div id=\"about\" transition:fade>\n  <span on:click={() => $state.about = 0} class=\"close\">&times;</span>\n  <div id=\"aboutCont\">\n    <AnimatedCOA {duration}/>\n    <div class=buttons in:fly=\"{{y:200, delay: duration, duration}}\">\n      <a target=_blank href=https://discord.com/invite/X7E84HU><span translate=\"no\">Discord</span></a>\n      <a target=_blank href=https://github.com/Azgaar/Armoria><span translate=\"no\">GitHub</span></a>\n      <a target=_blank href=https://www.patreon.com/azgaar><span translate=\"no\">Patreon</span></a>\n    </div>\n  </div>\n</div>\n\n<style>\n  #about {\n    height: 100%;\n    width: 100%;\n    position: fixed;\n    z-index: 1;\n    left: 0;\n    top: 0;\n    background-color: rgba(0,0,0, 0.9);\n    transition: .5s;\n    text-align: center;\n    user-select: none;\n  }\n\n  #aboutCont {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n\n  a, span {\n    display: inline-block;\n    cursor: pointer;\n    color: #ddd;\n  }\n\n  a:hover, span:hover {\n    color: #fff;\n  }\n\n  .buttons > a {\n    margin: 2em;\n    font-size: 1.2em;\n  }\n\n  span.close {\n    position: fixed;\n    top: 0em;\n    right: .5em;\n    font-size: 4em;\n    padding: .2em 0;\n  }\n</style>\n","import {get } from 'svelte/store';\nimport { state, changes, grid } from \"./stores\";\n\nexport function drag(e, c, coa) {\n  if (!get(state).edit) return;\n  const el = e.currentTarget;\n  const [a0, x0, y0] = parseTransform(el.getAttribute(\"transform\"));\n  const x1 = e.x,\n    y1 = e.y;\n  const sizeAdj = +el.closest(\"svg\").getAttribute(\"width\") / 200;\n  document.addEventListener(\"mouseup\", dragStop, { once: true });\n\n  const size = c.size || 1;\n  const angle = c.angle || 0;\n  const rad = -a0 * (Math.PI / 180);\n  const cosAngle = Math.cos(rad);\n  const sinAngle = Math.sin(rad);\n  const gridSize = get(grid);\n\n  if (e.shiftKey) {\n    document.addEventListener(\"mousemove\", resize);\n    document.body.style.cursor = \"ns-resize\";\n  } else if (e.ctrlKey || e.metaKey) {\n    document.addEventListener(\"mousemove\", rotate);\n    document.body.style.cursor = \"ew-resize\";\n  } else {\n    document.addEventListener(\"mousemove\", move);\n    document.body.style.cursor = \"move\";\n  };\n\n  function move(e) {\n    const dx = x0 + (e.x - x1) / sizeAdj;\n    const dy = y0 + (e.y - y1) / sizeAdj;\n\n    const relX = (dx * cosAngle) - (dy * sinAngle);\n    const relY = (dx * sinAngle) + (dy * cosAngle);\n\n    c.x = Math.round(relX / gridSize) * gridSize;\n    c.y = Math.round(relY / gridSize) * gridSize;\n    el.setAttribute(\"transform\", transform(c));\n  }\n\n  function resize(e) {\n    const dy = y0 + (e.y - y1) / sizeAdj;\n    c.size = size + Math.round(dy) / -100;\n    el.setAttribute(\"transform\", transform(c));\n    if (c.p) changes.add(JSON.stringify(coa));\n  }\n\n  function rotate(e) {\n    const dx = x0 + (e.x - x1) / sizeAdj;\n    let a = angle + Math.round(dx / 1.8);\n    if (a > 180) a = a % 180 - 180;\n    if (a < -179) a = a % 180 + 180;\n    c.angle = a;\n    el.setAttribute(\"transform\", transform(c));\n  }\n\n  function dragStop() {\n    document.removeEventListener(\"mousemove\", move);\n    document.removeEventListener(\"mousemove\", resize);\n    document.removeEventListener(\"mousemove\", rotate);\n    document.body.style.cursor = \"auto\";\n    changes.add(JSON.stringify(coa));\n  }\n}\n\nexport function transform(c) {\n  if (!c.x && !c.y && !c.angle && !c.size) return null;\n\n  // charges have c.p and have size on use level, not on g level\n  const size = c.p ? 1 : c.size;\n  return `rotate(${c.angle||0}) translate(${c.x||0} ${c.y||0}) scale(${size||1})`;\n}\n\nfunction parseTransform(string) {\n  if (!string) { return [0, 0, 0, 0, 0, 1]; }\n  const a = string.replace(/[a-z()]/g, \"\").replace(/[ ]/g, \",\").split(\",\");\n  return [+a[0] || 0, +a[1] || 0, +a[2] || 0, +a[3] || 0, +a[4] || 0, +a[5] || 1];\n}","<script>\n  import {drag, transform} from \"./drag\"\n  export let coa, shieldPath, colors, t;\n  const ordinary = coa.ordinary;\n\n  function getTemplate(templateId, lineId) {\n    if (!lineId) return document.getElementById(templateId)?.innerHTML;\n    const template = document.getElementById(templateId);\n    const line = document.getElementById(lineId) ? document.getElementById(lineId) : document.getElementById(\"straight\");\n    return template.innerHTML.replace(/{line}/g, line.getAttribute(\"d\")).replace(/dpath/g, \"d\");\n  }\n</script>\n\n{#if ordinary.ordinary === \"bordure\"}\n  <g class=\"ordinary\" transform={transform(ordinary)} transform-origin=\"center\" on:mousedown={function(e) {drag(e, ordinary, coa)}}>\n    <path d={shieldPath} fill=\"none\" stroke={colors[t]} stroke-width=\"16.7%\"/>\n  </g>\n{:else if ordinary.ordinary === \"orle\"}\n  <g class=\"ordinary\" transform={transform(ordinary)} transform-origin=\"center\" on:mousedown={function(e) {drag(e, ordinary, coa)}}>\n    <path d={shieldPath} fill=\"none\" stroke={colors[t]} stroke-width=\"5%\" transform=\"scale(.85)\" transform-origin=\"center\"/>\n  </g>\n{:else}\n  <g class=\"ordinary\" transform={transform(ordinary)} transform-origin=\"center\" fill={colors[t]} on:mousedown={function(e) {drag(e, ordinary, coa)}}>\n    {@html getTemplate(ordinary.ordinary, ordinary.line)}\n  </g>\n{/if}","export const tinctures = {\n  field: { metals: 5, colours: 7, patterns: 2 },\n  division: { metals: 5, colours: 7, patterns: 1 },\n  charge: { metals: 2, colours: 3 },\n  metals: {\n    field: { argent: 3, or: 2 },\n    division: { argent: 3, or: 2 },\n    charge: { argent: 1, or: 2 }\n  },\n  colours: {\n    field: { gules: 5, sable: 3, azure: 4, vert: 2, purpure: 3 },\n    division: { gules: 5, sable: 3, azure: 4, vert: 2, purpure: 3 },\n    charge: { gules: 7, sable: 1, azure: 5, vert: 3, purpure: 2 }\n  },\n  patterns: { // patterns including furs\n    field: { semy: 1, vair: 2, vairInPale: 1, vairEnPointe: 2, ermine: 2, chequy: 4, lozengy: 2, fusily: 1, pally: 4, barry: 4, gemelles: 1, bendy: 3, bendySinister: 2, palyBendy: 1, pappellony: 2, masoned: 3, fretty: 2 },\n    division: { semy: 1, vair: 3, vairInPale: 2, vairEnPointe: 3, ermine: 4, chequy: 3, lozengy: 1, fusily: 1, pally: 5, barry: 5, bendy: 2, bendySinister: 1, pappellony: 1, masoned: 3, fretty: 1 }\n  }\n};\n\nexport const positionsSelect = [\n  \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\",\n  \"kn\", \"bh\", \"df\", \"pq\", \"jo\", \"lm\",\n  \"abc\", \"def\", \"ghi\", \"adg\", \"beh\", \"cfi\",\n  \"jeo\", \"jln\", \"kmo\", \"peq\", \"lem\",\n  \"bhdf\", \"jleh\", \"behdf\", \"acegi\",\n  \"bdefh\", \"kenpq\", \"abcpqh\",\n  \"abcdefgzi\", \"ABCDEFGHIJKL\"];\n\nexport const positions = {\n  conventional: { e: 20, abcdefgzi: 3, beh: 3, behdf: 2, acegi: 1, kn: 3, bhdf: 1, jeo: 1, abc: 3, jln: 6, jlh: 3, kmo: 2, jleh: 1, def: 3, abcpqh: 4, ABCDEFGHIJKL: 1 },\n  complex: { e: 40, beh: 1, kn: 1, jeo: 1, abc: 2, jln: 7, jlh: 2, def: 1, abcpqh: 1 },\n  divisions: {\n    perPale: { e: 15, pq: 5, jo: 2, jl: 2, ABCDEFGHIJKL: 1 },\n    perFess: { e: 12, kn: 4, jkl: 2, gizgiz: 1, jlh: 3, kmo: 1, ABCDEFGHIJKL: 1 },\n    perBend: { e: 5, lm: 5, bcfdgh: 1 },\n    perBendSinister: { e: 1, jo: 1 },\n    perCross: { e: 4, jlmo: 1, jj: 1, jo: 2, jl: 1 },\n    perChevron: { e: 1, jlh: 1, dfk: 1, dfkh: 2, bdefh: 1 },\n    perChevronReversed: { e: 1, mok: 2, dfh: 2, dfkh: 1, bdefh: 1 },\n    perSaltire: { bhdf: 8, e: 3, abcdefgzi: 1, bh: 1, df: 1, beh: 1, behdf: 1, ABCDEFGHIJKL: 1 },\n    perPile: { ee: 3, be: 2, abceh: 1, abcabc: 1, jleh: 1 }\n  },\n  ordinariesOn: {\n    pale: { ee: 12, beh: 10, kn: 3, bb: 1 },\n    fess: { ee: 1, def: 3 },\n    bar: { defdefdef: 1 },\n    fessCotissed: { ee: 1, def: 3 },\n    fessDoubleCotissed: { ee: 1, defdef: 3 },\n    bend: { ee: 2, jo: 1, joe: 1 },\n    bendSinister: { ee: 1, lm: 1, lem: 4 },\n    bendlet: { joejoejoe: 1 },\n    bendletSinister: { lemlemlem: 1 },\n    bordure: { ABCDEFGHIJKL: 1 },\n    chief: { abc: 5, bb: 1 },\n    quarter: { jjj: 1 },\n    canton: { yyyy: 1 },\n    cross: { eeee: 1, behdfbehdf: 3, behbehbeh: 2 },\n    crossParted: { e: 5, ee: 1 },\n    saltire: { ee: 5, jlemo: 1 },\n    saltireParted: { e: 5, ee: 1 },\n    pall: { ee: 1, acez: 5, jlhh: 3 },\n    pallReversed: { ee: 1, bemo: 5 },\n    pile: { bb: 1 },\n    pileInBend: { eeee: 1, eeoo: 1 },\n    pileInBendSinister: { eeee: 1, eemm: 1 }\n  },\n  ordinariesOff: {\n    pale: { yy: 1 },\n    fess: { abc: 3, abcz: 1 },\n    bar: { abc: 2, abcgzi: 1, jlh: 5, bgi: 2, ach: 1 },\n    gemelle: { abc: 1 },\n    bend: { cg: 2, cc: 1 },\n    bendSinister: { ai: 2, aa: 1 },\n    bendlet: { cg: 2, cc: 1 },\n    bendletSinister: { ai: 2, aa: 1 },\n    bordure: { e: 4, jleh:2, kenken: 1, peqpeq: 1 },\n    orle: { e: 4, jleh: 1, kenken: 1, peqpeq: 1 },\n    chief: { emo: 2, emoz: 1, ez: 2 },\n    terrace: { e: 5, def: 1, bdf: 3 },\n    mount: { e: 5, def: 1, bdf: 3 },\n    point: { e: 2, def: 1, bdf: 3, acbdef: 1 },\n    flaunches: { e: 3, kn: 1, beh: 3 },\n    qyron: { bh: 1 },\n    quarter: { e: 1 },\n    canton: { e: 5, beh: 1, def: 1, bdefh: 1, kn: 1 },\n    cross: { acgi: 1 },\n    pall: { BCKFEILGbdmfo: 1 },\n    pallReversed: { aczac: 1 },\n    chevron: { ach: 3, hh: 1 },\n    chevronReversed: { bb: 1 },\n    pile: { acdfgi: 1, acac: 1 },\n    pileInBend: { cg: 1 },\n    pileInBendSinister: { ai: 1 },\n    label: { defgzi: 2, eh: 3, defdefhmo: 1, egiegi: 1, pqn: 5 }\n  },\n  // charges\n  inescutcheonHeater: { e: 3, jln: 1 },\n  inescutcheonOldFrench: { e: 3, jln: 1 },\n  inescutcheonSpanish: { e: 3, jln: 1 },\n  mascle: { e: 15, abcdefgzi: 3, beh: 3, bdefh: 4, acegi: 1, kn: 3, joe: 2, abc: 3, jlh: 8, jleh: 1, df: 3, abcpqh: 4, pqe: 3, eknpq: 3 },\n  lionRampant: { e: 10, def: 2, abc: 2, bdefh: 1, kn: 1, jlh: 2, abcpqh: 1 },\n  lionPassant: { e: 10, def: 1, abc: 1, bdefh: 1, jlh: 1, abcpqh: 1 },\n  wolfPassant: { e: 10, def: 1, abc: 1, bdefh: 1, jlh: 1, abcpqh: 1 },\n  greyhoundСourant: { e: 10, def: 1, abc: 1, bdefh: 1, jlh: 1, abcpqh: 1 },\n  griffinRampant: { e: 10, def: 2, abc: 2, bdefh: 1, kn: 1, jlh: 2, abcpqh: 1 },\n  griffinPassant: { e: 10, def: 1, abc: 1, bdefh: 1, jlh: 1, abcpqh: 1 },\n  boarRampant: { e: 12, beh: 1, kn: 1, jln: 2 },\n  eagle: { e: 15, beh: 1, kn: 1, abc: 1, jlh: 2, def: 2, pq: 1 },\n  raven: { e: 15, beh: 1, kn: 1, jeo: 1, abc: 3, jln: 3, def: 1 },\n  wyvern: { e: 10, jln: 1 },\n  garb: { e: 1, def: 3, abc: 2, beh: 1, kn: 1, jln: 3, jleh: 1, abcpqh: 1, joe: 1, lme: 1 },\n  crown: { e: 10, abcdefgzi: 1, beh: 3, behdf: 2, acegi: 1, kn: 1, pq: 2, abc: 1, jln: 4, jleh: 1, def: 2, abcpqh: 3 },\n  hand: { e: 10, jln: 2, kn: 1, jeo: 1, abc: 2, pqe: 1 }\n};\n\nexport const lines = {\n  straight: 40, wavy: 8, engrailed: 4, invecked: 3, rayonne: 3, embattled: 1, raguly: 1, urdy: 1, dancetty: 1, indented: 2,\n  dentilly: 1, bevilled: 1, angled: 1, flechy: 1, barby: 1, enclavy: 1, escartely: 1, arched: 2, archedReversed: 1, nowy: 1, nowyReversed: 1,\n  embattledGhibellin: 1, embattledNotched: 1, embattledGrady: 1, dovetailedIndented: 1, dovetailed: 1,\n  potenty: 1, potentyDexter: 1, potentySinister: 1, nebuly: 2, seaWaves: 1, dragonTeeth: 1, firTrees: 1\n};\n\nexport const divisions = {\n  variants: { perPale: 5, perFess: 5, perBend: 2, perBendSinister: 1, perChevron: 1, perChevronReversed: 1, perCross: 5, perPile: 1, perSaltire: 1, gyronny: 1, chevronny: 1 },\n  perPale: lines,\n  perFess: lines,\n  perBend: lines,\n  perBendSinister: lines,\n  perChevron: lines,\n  perChevronReversed: lines,\n  perCross: { straight: 20, wavy: 5, engrailed: 4, invecked: 3, rayonne: 1, embattled: 1, raguly: 1, urdy: 1, indented: 2, dentilly: 1, bevilled: 1, angled: 1, embattledGhibellin: 1, embattledGrady: 1, dovetailedIndented: 1, dovetailed: 1, potenty: 1, potentyDexter: 1, potentySinister: 1, nebuly: 1 },\n  perPile: lines\n};\n\nexport const ordinaries = {\n  lined: {\n    pale: 7, fess: 5, bend: 3, bendSinister: 2, chief: 5, bar: 2, gemelle: 1, fessCotissed: 1, fessDoubleCotissed: 1,\n    bendlet: 2, bendletSinister: 1, terrace: 3, cross: 6, crossParted: 1, saltire: 2, saltireParted: 1\n  },\n  straight: {\n    bordure: 8, orle: 4, mount: 1, point: 2, flaunches: 1, gore: 1,\n    qyron: 1, quarter: 1, canton: 2, pall: 3, pallReversed: 2, chevron: 4, chevronReversed: 3,\n    pile: 2, pileInBend: 2, pileInBendSinister: 1, piles: 1, pilesInPoint: 2, label: 1\n  }\n};\n\nexport const charges = {\n  types: { conventional: 30, crosses: 8, animals: 3, birds: 2, aquatic: 1, fantastic: 3, plants: 1, agriculture: 1, arms: 1, bodyparts: 1, miscellaneous: 3, inescutcheon: 3 },\n  single: { conventional: 12, crosses: 8, plants: 2, animals: 11, birds: 4, aquatic: 2, fantastic: 7, agriculture: 1, arms: 5, bodyparts: 1, miscellaneous: 8, inescutcheon: 5 },\n  semy: { conventional: 12, crosses: 3, plants: 1 },\n  conventional: {\n    lozenge: 2, fusil: 4, mascle: 4, rustre: 2, lozengeFaceted: 3, lozengePloye: 1, roundel: 7, annulet: 4,\n    mullet: 5, mulletPierced: 1, mulletFaceted: 1, mullet4: 3, mullet6: 4, mullet6Pierced: 1, mullet6Faceted: 1, mullet7: 1, mullet8: 1, mullet10: 1,\n    estoile: 1, billet: 5, triangle: 3, trianglePierced: 1, goutte: 4, heart: 4, pique: 2, trefle: 2, сarreau: 1,\n    fleurDeLis: 6, sun: 3, sunInSplendour: 1, crescent: 5, fountain: 1, compassRose: 1, fountain: 1\n  },\n  inescutcheon: { inescutcheonHeater: 2, inescutcheonOldFrench: 1, inescutcheonSpanish: 4 },\n  crosses: {\n    crossHummetty: 15, crossVoided: 1, crossPattee: 3, crossPotent: 2, crossClechy: 3, crosslet: 1, crossBottony: 1, crossFleury: 3,\n    crossPatonce: 1, crossPommy: 1, crossGamma: 1, crossArrowed: 1, crossFitchy: 1, crossCercelee: 1, crossMoline: 2, crossFourchy: 1,\n    crossAvellane: 1, crossErminee: 1, crossMaltese: 3, crossCeltic: 1, crossOccitan: 1, crossSaltire: 3, crossTau: 1\n  },\n  animals: { lionRampant: 4, lionPassant: 1, wolfPassant: 1, greyhoundСourant: 1, boarRampant: 1, horseRampant: 1, horseSalient: 1, bullPassant: 1, bullHeadCaboshed: 1, deerHeadCaboshed: 1 },\n  fantastic: { dragonPassant: 3, wyvern: 2, griffinPassant: 1, griffinRampant: 1, eagleTwoHeards: 2, unicornRampant: 1, pegasus: 1, serpent: 1 },\n  birds: { eagle: 9, raven: 2, cock: 3, parrot: 1, swan: 2, swanErased: 1, heron: 1 },\n  plants: { cinquefoil: 1, rose: 1 },\n  aquatic: { escallop: 5, pike: 1, cancer: 1 },\n  agriculture: { garb: 1 },\n  arms: { sword: 5, hatchet: 2, lochaberAxe: 1, mallet: 1 },\n  bodyparts: { hand: 1 },\n  miscellaneous: { crown: 3, key: 1, buckle: 1, bugleHorn: 1, horseshoe: 3, stagsAttires: 1, cowHorns: 2, wing: 1, wingSword: 1, lute: 1, harp: 1, wheel: 2, boat: 1 },\n  natural: { fountain: \"azure\", garb: \"or\", raven: \"sable\" }, // charges to use predefined colours\n  sinister: [\"crossGamma\", \"lionRampant\", \"lionPassant\", \"wolfPassant\", \"greyhoundСourant\", \"boarRampant\", \"horseRampant\", \"horseSalient\", \"bullPassant\",\n    \"eagle\", \"raven\", \"cock\", \"parrot\", \"swan\", \"swanErased\", \"heron\", \"pike\", \"dragonPassant\", \"wyvern\", \"griffinPassant\", \"griffinRampant\", \"unicornRampant\",\n    \"pegasus\", \"serpent\", \"hatchet\", \"lochaberAxe\", \"hand\", \"wing\", \"wingSword\", \"lute\", \"harp\"], // charges that can be sinister\n  reversed: [\"goutte\", \"mullet\", \"mullet7\", \"crescent\", \"crossTau\", \"cancer\", \"sword\", \"hand\", \"horseshoe\"] // charges that can be reversed\n}\n\nexport const shields = {\n  // shield-specific position: [x, y] (relative to center)\n  heater: {\n    a: [-43.75, -50], b: [0, -50], c: [43.75, -50],\n    d: [-43.75, 0], e: [0, 0], f: [43.75, 0],\n    g: [-32.25, 37.5], h: [0, 50], i: [32.25, 37.5],\n    y: [-50, -50], z: [0, 62.5],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-32.5, 32.5], n: [0, 42.5], o: [32.5, 32.5],\n    p: [-37.5, 0], q: [37.5, 0],\n    A: [-66.2, -66.6], B: [-22, -66.6], C: [22, -66.6], D: [66.2, -66.6],\n    K: [-66.2, -20], E: [66.2, -20],\n    J: [-55.5, 26], F: [55.5, 26],\n    I: [-33, 62], G: [33, 62],\n    H: [0, 89.5]\n  },\n  oldFrench: {\n    a: [-43.75, -50], b: [0, -50], c: [43.75, -50],\n    d: [-43.75, 0], e: [0, 0], f: [43.75, 0],\n    g: [-37.5, 50], h: [0, 50], i: [37.5, 50],\n    y: [-50, -50], z: [0, 62.5],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-37.5, 37.5], n: [0, 45], o: [37.5, 37.5],\n    p: [-37.5, 0], q: [37.5, 0],\n    A: [-66.2, -66.6], B: [-22, -66.6], C: [22, -66.6], D: [66.2, -66.6],\n    K: [-66.2, -20], E: [66.2, -20],\n    J: [-64, 26], F: [64, 26],\n    I: [-45, 62], G: [45, 62], \n    H: [0, 91.5],\n  },\n  spanish: {\n    a: [-43.75, -50], b: [0, -50], c: [43.75, -50],\n    d: [-43.75, 0], e: [0, 0], f: [43.75, 0],\n    g: [-43.75, 50], h: [0, 50], i: [43.75, 50],\n    y: [-50, -50], z: [0, 50],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-37.5, 37.5], n: [0, 50], o: [37.5, 37.5],\n    p: [-37.5, 0], q: [37.5, 0],\n    A: [-66.2, -66.6], B: [-22, -66.6], C: [22, -66.6], D: [66.2, -66.6],\n    K: [-66.4, -20], E: [66.4, -20],\n    J: [-66.4, 26], F: [66.4, 26],\n    I: [-49, 70], G: [49, 70],\n    H: [0, 92]\n  },\n  french: {\n    a: [-43.75, -50], b: [0, -50], c: [43.75, -50],\n    d: [-43.75, 0], e: [0, 0], f: [43.75, 0],\n    g: [-43.75, 50], h: [0, 50], i: [43.75, 50],\n    y: [-50, -50], z: [0, 65],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-37.5, 37.5], n: [0, 37.5], o: [37.5, 37.5],\n    p: [-37.5, 0], q: [37.5, 0],\n    A: [-66.2, -66.6], B: [-22, -66.6], C: [22, -66.6], D: [66.2, -66.6],\n    K: [-66.4, -20], E: [66.4, -20],\n    J: [-66.4, 26], F: [66.4, 26],\n    I: [-65.4, 70], G: [65.4, 70],\n    H: [0, 89]\n  },\n  swiss: {\n    a: [-43.75, -50], b: [0, -50], c: [43.75, -50],\n    d: [-43.75, 0], e: [0, 0], f: [43.75, 0],\n    g: [-32, 37.5], h: [0, 50], i: [32, 37.5],\n    y: [-50, -50], z: [0, 62.5],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-32, 32.5], n: [0, 42.5], o: [32, 32.5],\n    p: [-37.5, 0], q: [37.5, 0],\n    A: [-66.2, -66.6], B: [-22, -66], C: [22, -66], D: [66.2, -66.6],\n    K: [-63, -20], E: [63, -20],\n    J: [-50, 26], F: [50, 26],\n    I: [-29, 62], G: [29, 62],\n    H: [0, 89.5]\n  },\n  wedged: {\n    a: [-43.75, -50], b: [0, -50], c: [43.75, -50],\n    d: [-43.75, 0], e: [0, 0], f: [43.75, 0],\n    g: [-32.25, 37.5], h: [0, 50], i: [32.25, 37.5],\n    y: [-50, -50], z: [0, 62.5],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-32.5, 32.5], n: [0, 42.5], o: [32.5, 32.5],\n    p: [-37.5, 0], q: [37.5, 0],\n    A: [-66, -53], B: [-22, -72.5], C: [22, -72.5], D: [66, -53],\n    K: [-62.6, -13], E: [62.6, -13],\n    J: [-50, 26], F: [50, 26],\n    I: [-27, 62], G: [27, 62],\n    H: [0, 87]\n  },\n  italian: {\n    a: [-37.5, -50], b: [0, -50], c: [37.5, -50],\n    d: [-43, 0], e: [0, 0], f: [43, 0],\n    g: [-37.5, 50], h: [0, 50], i: [37.5, 50],\n    y: [-48, -48], z: [0, 60],\n    j: [-35.5, -37.5], k: [0, -37.5], l: [35.5, -37.5],\n    m: [-35.5, 37.5], n: [0, 50], o: [35.5, 37.5],\n    p: [-36.5, 0], q: [36.5, 0],\n    A: [-48, -48], B: [-23, -78], C: [23, -78], D: [48, -48],\n    K: [-59, -10], E: [59, -10],\n    J: [-55, 31], F: [55, 31],\n    I: [-36, 68], G: [36, 68],\n    H: [0, 85]\n  },\n  round: {\n    a: [-40, -47.5], b: [0, -47.5], c: [40, -47.5],\n    d: [-40, 0], e: [0, 0], f: [40, 0],\n    g: [-32.5, 47.5], h: [0, 47.5], i: [32.5, 47.5],\n    y: [-48, -48], z: [0, 57.5],\n    j: [-35.5, -35.5], k: [0, -37.5], l: [35.5, -35.5],\n    m: [-35.5, 35.5], n: [0, 37.5], o: [35.5, 35.5],\n    p: [-36.5, 0], q: [36.5, 0],\n    A: [-59, -48], B: [-23, -73], C: [23, -73], D: [59, -48],\n    K: [-76, -10], E: [76, -10],\n    J: [-70, 31], F: [70, 31],\n    I: [-42, 64], G: [42, 64],\n    H: [0, 77]\n  },\n  renaissance: {\n    a: [-43.75, -50], b: [0, -50], c: [43.75, -50],\n    d: [-41.5, 0], e: [0, 0], f: [41.5, 0],\n    g: [-43.75, 50], h: [0, 50], i: [43.75, 50],\n    y: [-50, -50], z: [0, 62.5],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-37.5, 37.5], n: [0, 37.5], o: [37.5, 37.5],\n    p: [-37.5, 0], q: [37.5, 0],\n    A: [-61, -55], B: [-23, -67], C: [23, -67], D: [61, -55],\n    K: [-55, -11], E: [55, -11],\n    J: [-65, 31], F: [65, 31],\n    I: [-45, 76], G: [45, 76],\n    H: [0, 87]\n  },\n  baroque: {\n    a: [-43.75, -45], b: [0, -50], c: [43.75, -45],\n    d: [-43.75, 0], e: [0, 0], f: [43.75, 0],\n    g: [-43.75, 50], h: [0, 50], i: [43.75, 50],\n    y: [-50, -50], z: [0, 60],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-37.5, 37.5], n: [0, 50], o: [37.5, 37.5],\n    p: [-37.5, 0], q: [37.5, 0],\n    A: [-65, -54.5], B: [-22, -65], C: [22, -65], D: [65, -54.5],\n    K: [-58.5, -15], E: [58.5, -15],\n    J: [-65, 31], F: [66, 31],\n    I: [-35, 73], G: [35, 73],\n    H: [0, 89]\n  },\n  polish: {\n    a: [-35, -50], b: [0, -50], c: [35, -50],\n    d: [-40, 0], e: [0, 0], f: [40, 0],\n    g: [-37.5, 50], h: [0, 50], i: [37.5, 50],\n    y: [-50, -50], z: [0, 65],\n    j: [-27.5, -27.5], k: [0, -45], l: [27.5, -27.5],\n    m: [-27.5, 27.5], n: [0, 45], o: [27.5, 27.5],\n    p: [-32.5, 0], q: [32.5, 0],\n    A: [-48, -52], B: [-23, -80], C: [23, -80], D: [48, -52],\n    K: [-47, -10], E: [47, -10],\n    J: [-62, 32], F: [62, 32],\n    I: [-37, 68], G: [37, 68],\n    H: [0, 86]\n  },\n  german: {\n    a: [-43.75, -50], b: [0, -50], c: [43.75, -50],\n    d: [-40, 0], e: [0, 0], f: [40, 0],\n    g: [-43.75, 50], h: [0, 50], i: [43.75, 50],\n    y: [-50, -50], z: [0, 60],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-37.5, 37.5], n: [0, 50], o: [37.5, 37.5],\n    p: [-32.5, 0], q: [32.5, 0],\n    A: [-55, -59], B: [-15, -59], C: [24, -79], D: [50, -58],\n    K: [-40, -14], E: [51, -14],\n    J: [-64, 26], F: [62, 26],\n    I: [-46, 66], G: [48, 67],\n    H: [0, 83]\n  },\n  diamond: {\n    a: [-32, -37], b: [0, -50], c: [32, -37],\n    d: [-43, 0], e: [0, 0], f: [43, 0],\n    g: [-32, 37], h: [0, 50], i: [32, 37],\n    y: [-50, -50], z: [0, 62],\n    j: [-27.5, -27.5], k: [0, -37], l: [27.5, -27.5],\n    m: [-27.5, 27.5], n: [0, 42], o: [27.5, 27.5],\n    p: [-37, 0], q: [37, 0],\n    A: [-43, -28], B: [-22, -56], C: [22, -56], D: [43, -28],\n    K: [-63, 0], E: [63, 0],\n    J: [-42, 28], F: [42, 28],\n    I: [-22, 56], G: [22, 56],\n    H: [0, 83], L: [0, -82]\n  },\n  kite: {\n    b: [0, -65], e: [0, -15], h: [0, 35],\n    z: [0, 35], k: [0, -50], n: [0, 20],\n    p: [-20, -15], q: [20, -15],\n    A: [-38, -52], B: [-29, -78], C: [29, -78], D: [38, -52],\n    K: [-33, -20], E: [33, -20],\n    J: [-25, 11], F: [25, 11],\n    I: [-15, 42], G: [15, 42],\n    H: [0, 73], L: [0, -91]\n  },\n  vesicaPiscis: {\n    a: [-32, -37], b: [0, -50], c: [32, -37],\n    d: [-32, 0], e: [0, 0], f: [32, 0],\n    g: [-32, 37], h: [0, 50], i: [32, 37],\n    y: [-50, -50], z: [0, 62],\n    j: [-27.5, -27.5], k: [0, -37], l: [27.5, -27.5],\n    m: [-27.5, 27.5], n: [0, 42], o: [27.5, 27.5],\n    p: [-27.5, 0], q: [27.5, 0],\n    A: [-45, -32], B: [-29, -63], C: [29, -63], D: [45, -32],\n    K: [-50, 0], E: [50, 0],\n    J: [-45, 32], F: [45, 32],\n    I: [-29, 63], G: [29, 63],\n    H: [0, 89], L: [0, -89]\n  },\n  square: {\n    a: [-49.75, -50], b: [0, -50], c: [49.75, -50],\n    d: [-49.75, 0], e: [0, 0], f: [49.75, 0],\n    g: [-49.75, 50], h: [0, 50], i: [49.75, 50],\n    y: [-50, -50], z: [0, 50],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-37.5, 37.5], n: [0, 37.5], o: [37.5, 37.5],\n    p: [-37.5, 0], q: [37.5, 0],\n    A: [-66.5, -66.5], B: [-22, -66.5], C: [22, -66.5], D: [66.5, -66.5],\n    K: [-66.5, -20], E: [66.5, -20],\n    J: [-66.5, 26], F: [66.5, 26],\n    I: [-66.5, 66.5], G: [66.5, 66.5],\n    H: [-22, 66.5], L: [22, 66.5]\n  },\n  flag: {\n    a: [-60, -40], b: [0, -40], c: [60, -40],\n    d: [-60, 0], e: [0, 0], f: [60, 0],\n    g: [-60, 40], h: [0, 40], i: [60, 40],\n    y: [-60, -42.5], z: [0, 40],\n    j: [-45, -30], k: [0, -30], l: [45, -30],\n    m: [-45, 30], n: [0, 30], o: [45, 30],\n    p: [-45, 0], q: [45, 0],\n    A: [-81, -51], B: [-27, -51], C: [27, -51], D: [81, -51],\n    K: [-81, -17], E: [81, -17],\n    J: [-81, 17], F: [81, 17],\n    I: [-81, 51], G: [81, 51],\n    H: [-27, 51], L: [27, 51]\n  },\n  pennon: {\n    a: [-75, -40],\n    d: [-75, 0], e: [-25, 0], f: [25, 0],\n    g: [-75, 40],\n    y: [-70, -42.5],\n    j: [-60, -30],\n    m: [-60, 30],\n    p: [-60, 0], q: [5, 0],\n    A: [-81, -48], B: [-43, -36], C: [-4.5, -24], D: [33, -12],\n    E: [72, 0],\n    F: [33, 12], G: [-4.5, 24], H: [-43, 36], I: [-81, 48], \n    J: [-81, 17], K: [-81, -17]\n  },\n  guidon: {\n    a: [-60, -40], b: [0, -40], c: [60, -40],\n    d: [-60, 0], e: [0, 0],\n    g: [-60, 40], h: [0, 40], i: [60, 40],\n    y: [-60, -42.5], z: [0, 40],\n    j: [-45, -30], k: [0, -30], l: [45, -30],\n    m: [-45, 30], n: [0, 30], o: [45, 30],\n    p: [-45, 0],\n    A: [-81, -51], B: [-27, -51], C: [27, -51], D: [78, -51],\n    K: [-81, -17], E: [40.5, -17],\n    J: [-81, 17], F: [40.5, 17],\n    I: [-81, 51], G: [78, 51],\n    H: [-27, 51], L: [27, 51]\n  },\n  banner: {\n    a: [-50, -50], b: [0, -50], c: [50, -50],\n    d: [-50, 0], e: [0, 0], f: [50, 0],\n    g: [-50, 40], h: [0, 40], i: [50, 40],\n    y: [-50, -50], z: [0, 40],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-37.5, 27.5], n: [0, 27.5], o: [37.5, 27.5],\n    p: [-37.5, 0], q: [37.5, 0],\n    A: [-66.5, -66.5], B: [-22, -66.5], C: [22, -66.5], D: [66.5, -66.5],\n    K: [-66.5, -20], E: [66.5, -20],\n    J: [-66.5, 26], F: [66.5, 26],\n    I: [-66.5, 66.5], G: [66.5, 66.5],\n    H: [-25, 75], L: [25, 75]\n  },\n  dovetail: {\n    a: [-49.75, -50], b: [0, -50], c: [49.75, -50],\n    d: [-49.75, 0], e: [0, 0], f: [49.75, 0],\n    g: [-49.75, 50], i: [49.75, 50],\n    y: [-50, -50], z: [0, 40],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-37.5, 37.5], n: [0, 32.5], o: [37.5, 37.5],\n    p: [-37.5, 0], q: [37.5, 0],\n    A: [-66.5, -66.5], B: [-22, -66.5], C: [22, -66.5], D: [66.5, -66.5],\n    K: [-66.5, -16.5], E: [66.5, -16.5],\n    J: [-66.5, 34.5], F: [66.5, 34.5],\n    I: [-66.5, 84.5], G: [66.5, 84.5],\n    H: [-25, 64], L: [25, 64]\n  },\n  gonfalon: {\n    a: [-49.75, -50], b: [0, -50], c: [49.75, -50],\n    d: [-49.75, 0], e: [0, 0], f: [49.75, 0],\n    g: [-49.75, 50], h: [0, 50], i: [49.75, 50],\n    y: [-50, -50], z: [0, 50],\n    j: [-37.5, -37.5], k: [0, -37.5], l: [37.5, -37.5],\n    m: [-37.5, 37.5], n: [0, 37.5], o: [37.5, 37.5],\n    p: [-37.5, 0], q: [37.5, 0],\n    A: [-66.5, -66.5], B: [-22, -66.5], C: [22, -66.5], D: [66.5, -66.5],\n    K: [-66.5, -20], E: [66.5, -20],\n    J: [-66.5, 26], F: [66.5, 26],\n    I: [-40, 63], G: [40, 63],\n    H: [0, 88]\n  },\n  pennant: {\n    a: [-45, -50], b: [0, -50], c: [45, -50],\n    e: [0, 0], h: [0, 50],\n    y: [-50, -50], z: [0, 50],\n    j: [-32.5, -37.5], k: [0, -37.5], l: [32.5, -37.5],\n    n: [0, 37.5],\n    A: [-60, -76], B: [-22, -76], C: [22, -76], D: [60, -76],\n    K: [-46, -38], E: [46, -38],\n    J: [-31, 0], F: [31, 0],\n    I: [-16, 38], G: [16, 38],\n    H: [0, 76]\n  }\n};","<script>\n  import {shields} from \"./dataModel.js\";\n  import {loadedCharges} from \"./stores\";\n  import {drag, transform} from \"./drag\"\n  export let coa, charge, i, shield, colors, t;\n\n  $: shieldPositions = shields[shield] || shields.spanish;\n  $: positions = [...new Set(charge.p)].filter(p => shieldPositions[p]);\n\n  const defs = document.getElementById(\"charges\");\n  function getCharge(charge) {\n    if ($loadedCharges[charge] || defs.querySelector(\"#\"+charge)) return charge;\n    $loadedCharges[charge] = 1;\n\n    fetch(\"charges/\"+charge+\".svg\").then(response => response.text()).then(text => {\n      const el = document.createElement(\"html\");\n      el.innerHTML = text;\n      defs.insertAdjacentHTML(\"beforeend\", el.querySelector(\"g\").outerHTML);\n    });\n    return charge;\n  }\n\n  function getElTransform(shieldPositions, c, p) {\n    const [x, y] = shieldPositions[p];\n    const s = c.size || 1;\n    const scale = c.sinister || c.reversed ? `${c.sinister ? \"-\" : \"\"}${s}, ${c.reversed ? \"-\" : \"\"}${s}` : s;\n    return `translate(${x} ${y}) scale(${scale})`;\n  }\n</script>\n\n<g class=\"charge\" {i} charge={getCharge(charge.charge)} transform={transform(charge)} transform-origin=\"center\" stroke=\"#000\" on:mousedown={function(e) {drag(e, charge, coa)}}>\n  {#each positions as p}\n    <use href=\"#{charge.charge}\" transform={getElTransform(shieldPositions, charge, p)} transform-origin=\"center\" fill=\"{colors[t]}\"></use>\n  {/each}\n</g>","<script>\n  import {state, grid, showGrid} from \"./stores\";\n  import {fade} from 'svelte/transition';\n\n  $: transform = $state.transform || null;\n</script>\n\n{#if $showGrid}\n  <pattern id=gridPattern width={$grid} height={$grid} patternUnits=\"userSpaceOnUse\">\n    <path d=\"M 100 0 L 0 0 0 100\" fill=\"none\" stroke=\"#000\" opacity=.2 stroke-width=.5/>\n  </pattern>\n  <g id=grid style=\"pointer-events: none\" {transform} transform-origin=center transition:fade|local>\n    <rect x=-200 y=-200 width=400 height=400 fill=\"url(#gridPattern)\"/>\n  </g>\n{/if}","<script>\n  import {state, shield} from \"./stores\";\n  import {shields} from \"./dataModel.js\";\n  import {fade} from 'svelte/transition';\n\n  // on shield change\n  $: points = shields[$shield] ? Object.entries(shields[$shield]) : Object.entries(shields.spanish);\n\n  function getClass(p) {\n    if (\"abcdefghi\".includes(p)) return \"green\";\n    if (\"ABCDEFGHIJKL\".includes(p)) return \"red\";\n    if (\"zy\".includes(p)) return \"yellow\";\n    return \"blue\";\n  }\n</script>\n\n{#if $state.positions}\n  <g transform={$state.transform || null} transform-origin=center>\n    <g id=positions transform=\"translate(100, 100)\" transition:fade|local>\n      {#each points as p}\n        <g id={p[0]} class={getClass(p[0])}>\n          <circle cx={p[1][0]} cy={p[1][1]} r=3 class:active={$state.positions.includes(p[0])}/>\n          <text style=\"dominant-baseline: central\" x={p[1][0]} y={p[1][1]} class:active={$state.positions.includes(p[0])}>{p[0]}</text>\n        </g>\n      {/each}\n    </g>\n  </g>\n{/if}\n\n<style>\n  circle {\n    opacity: .6;\n  }\n\n  circle.active {\n    opacity: 1;\n  }\n\n  text {\n    font-family: monospace;\n    text-anchor: middle;\n    font-size: 5px;\n    fill: #ddd;\n  }\n\n  text.active {\n    fill: #fff;\n  }\n\n  .green {\n    fill: rgb(12, 80, 12);\n  }\n\n  .blue {\n    fill: rgb(12, 12, 80);\n  }\n\n  .red {\n    fill: rgb(80, 12, 12);\n  }\n\n  .yellow {\n    fill: rgb(84, 84, 0);\n  }\n</style>","<script>\n  import Ordinary from './Ordinary.svelte';\n  import Charge from './Charge.svelte';\n  import Grid from './Grid.svelte';\n  import Positions from './Positions.svelte';\n  import {grad, diaper, shield, colors, border, borderWidth, patterns} from './stores';\n  export let coa, i, w, h;\n\n  const {ordinary, division, charges = []} = coa;\n  const tDiv = division ? division.t : \"\";\n\n  const viewBox = {\n    no: \"0 0 200 200\",\n    heater: \"0 10 200 200\",\n    oldFrench: \"0 10 200 200\",\n    spanish: \"0 10 200 200\",\n    french: \"0 10 200 200\",\n    swiss: \"0 10 200 200\",\n    wedged: \"0 10 200 200\",\n    italian: \"0 0 200 200\",\n    kite: \"0 0 200 200\",\n    renaissance: \"0 0 200 200\",\n    baroque: \"0 10 200 200\",\n    polish: \"0 0 200 200\",\n    german: \"0 0 200 200\",\n    diamond: \"0 0 200 200\",\n    round: \"0 0 200 200\",\n    vesicaPiscis: \"0 0 200 200\",\n    square: \"0 0 200 200\",\n    flag: \"0 0 200 200\",\n    pennon: \"2.5 0 200 200\",\n    guidon: \"2.5 0 200 200\",\n    banner: \"0 10 200 200\",\n    dovetail: \"0 10 200 200\",\n    gonfalon: \"0 10 200 200\",\n    pennant: \"0 0 200 200\"\n  }\n\n  $: coaShield = coa.shield || $shield;\n  $: shieldPath = document.querySelector(`#defs g#shields > #${coaShield} > path`).getAttribute(\"d\");\n  $: coaDiaper = coa.diaper || $diaper;\n  $: diaperType = coaDiaper ? getDieperType() : null;\n  $: strokeWidth = $borderWidth;\n  $: coaGrad = coa.grad || $grad;\n  $: coaColors = $colors;\n\n  function getDieperType() {\n    const f = !coa.t1.includes(\"-\");\n    const d = !tDiv.includes(\"-\");\n    if (f && d) return \"overall\";\n    if (f) return \"field\";\n    if (d) return \"division\";\n    return null;\n  }\n\n  function getTemplate(templateId, lineId) {\n    if (!lineId) return document.getElementById(templateId)?.innerHTML;\n    const template = document.getElementById(templateId);\n    const line = document.getElementById(lineId) ? document.getElementById(lineId) : document.getElementById(\"straight\");\n    return template.innerHTML.replace(/{line}/g, line.getAttribute(\"d\")).replace(/dpath/g, \"d\");\n  }\n\n  // get color or link to pattern\n  function clr(tincture) {\n    if (coaColors[tincture]) return coaColors[tincture];\n    if (!tincture) debugger;\n    $patterns[$patterns.length] = tincture;\n    return \"url(#\"+tincture+\")\";\n  }\n</script>\n\n<svg id=\"coa{i}\" class=\"coa\" xmlns=\"http://www.w3.org/2000/svg\" width={w} height={h} viewBox={viewBox[coaShield]} on:click={() => console.log(coa)}>\n  <defs>\n    {#if division}\n      <clipPath id=\"divisionClip{i}\">\n        {@html getTemplate(division.division, division.line)}\n      </clipPath>\n    {/if}\n  </defs>\n  <g id=\"shield\" clip-path=\"url(#{coaShield})\">\n\n    <!-- field layer -->\n    <rect id=\"field\" x=0 y=0 width=200 height=200 fill=\"{coaColors[coa.t1] || clr(coa.t1)}\"/>\n    {#if division && ordinary?.divided}\n      {#if ordinary.divided === \"counter\"}<Ordinary {coa} {shieldPath} colors={coaColors} t={tDiv}/>{/if}\n      {#if ordinary.divided === \"field\"}<Ordinary {coa} {shieldPath} colors={coaColors} t={ordinary.t}/>{/if}\n    {/if}\n    {#if diaperType === \"field\"}<rect class=\"diaper\" x=0 y=0 width=200 height=200 fill=\"url(#{coaDiaper})\" style=\"pointer-events: none\"/>{/if}\n    {#if division}\n      {#each charges as charge, i}\n        {#if charge.layer === \"field\"}\n          <Charge {coa} {charge} {i} shield={coaShield} colors={coaColors} t={charge.t}/>\n        {:else if charge.layer === \"counter\"}\n          <Charge {coa} {charge} {i} shield={coaShield} colors={coaColors} t={tDiv}/>\n        {/if}\n      {/each}\n    {/if}\n\n    <!-- division layer -->\n    {#if division}\n      <g id=\"division\" clip-path=\"url(#divisionClip{i})\">\n        <rect x=0 y=0 width=200 height=200 fill=\"{coaColors[tDiv] || clr(tDiv)}\"/>\n        {#if ordinary?.divided}\n          {#if ordinary.divided === \"counter\"}<Ordinary {coa} {shieldPath} colors={coaColors} t={coa.t1}/>{/if}\n          {#if ordinary.divided === \"division\"}<Ordinary {coa} {shieldPath} colors={coaColors} t={ordinary.t}/>{/if}\n        {/if}\n        {#if diaperType === \"division\"}<rect class=\"diaper\" x=0 y=0 width=200 height=200 fill=\"url(#{coaDiaper})\" style=\"pointer-events: none\"/>{/if}\n        {#if division}\n          {#each charges as charge, i}\n            {#if charge.layer === \"division\"}\n              <Charge {coa} {charge} {i} shield={coaShield} colors={coaColors} t={charge.t}/>\n            {:else if charge.layer === \"counter\"}\n              <Charge {coa} {charge} {i} shield={coaShield} colors={coaColors} t={coa.t1}/>\n            {/if}\n          {/each}\n        {/if}\n      </g>\n    {/if}\n\n    <!-- overall layer -->\n    {#if ordinary && !ordinary.divided}\n      <Ordinary {coa} {shieldPath} colors={coaColors} t={ordinary.t}/>\n    {/if}\n    {#if diaperType === \"overall\"}<rect class=\"diaper\" x=0 y=0 width=200 height=200 fill=\"url(#{coaDiaper})\" style=\"pointer-events: none\"/>{/if}\n    {#each charges as charge, i}\n      {#if !charge.layer || !division}\n        <Charge {coa} {charge} {i} shield={coaShield} colors={coaColors} t={charge.t}/>\n      {/if}\n    {/each}\n  </g>\n\n  <path class=\"grad\" d={shieldPath} fill=\"url(#{coaGrad})\" stroke={$border} stroke-width={strokeWidth} style=\"pointer-events: none\"/>\n\n  {#if i === \"Edit\"}\n    <Grid/>\n    <Positions/>\n  {/if}\n</svg>","<script>\n  import Ordinary from './Ordinary.svelte';\n  import Charge from './Charge.svelte';\n  import {shield, colors, patterns} from './stores';\n  export let coa, title, itemSize;\n\n  let {ordinary, division, charges = []} = coa;\n  if (ordinary?.ordinary === \"no\") ordinary = null;\n  let tDiv = division ? division.t : \"\";\n  let i = Math.floor(1e6 * Math.random());\n\n  $: coaShield = coa.shield || $shield;\n  $: shieldPath = document.querySelector(`#defs g#shields > #${coaShield} > path`).getAttribute(\"d\");\n  $: coaColors = $colors;\n\n  function getTemplate(templateId, lineId) {\n    if (!lineId) return document.getElementById(templateId)?.innerHTML;\n    const template = document.getElementById(templateId);\n    const line = document.getElementById(lineId) ? document.getElementById(lineId) : document.getElementById(\"straight\");\n    return template.innerHTML.replace(/{line}/g, line.getAttribute(\"d\")).replace(/dpath/g, \"d\");\n  }\n\n  // get color or link to pattern\n  function clr(tincture) {\n    if (coaColors[tincture]) return coaColors[tincture];\n    if (!tincture) debugger;\n    $patterns[$patterns.length] = tincture;\n    return \"url(#\"+tincture+\")\";\n  }\n</script>\n\n<svg class=\"menuItem\" xmlns=\"http://www.w3.org/2000/svg\" width={itemSize} height={itemSize} viewBox=\"0 0 200 200\">\n  <title>{title}</title>\n  <defs>\n    {#if division && division.division !== \"no\"}\n      <clipPath id=\"divisionClipMenu{i}\">\n        {@html getTemplate(division.division, division.line)}\n      </clipPath>\n    {/if}\n  </defs>\n  <g id=\"shield\" clip-path=\"url(#{coaShield})\">\n\n    <!-- field layer -->\n    <rect id=\"field\" x=0 y=0 width=200 height=200 fill=\"{coaColors[coa.t1] || clr(coa.t1)}\"/>\n    {#if division && ordinary?.divided}\n      {#if ordinary.divided === \"counter\"}<Ordinary {coa} {shieldPath} colors={coaColors} t={tDiv}/>{/if}\n      {#if ordinary.divided === \"field\"}<Ordinary {coa} {shieldPath} colors={coaColors} t={ordinary.t}/>{/if}\n    {/if}\n    {#each charges as charge, i}\n      {#if charge.layer === \"field\"}\n        <Charge {coa} {charge} {i} shield={coaShield} colors={coaColors} t={charge.t}/>\n      {:else if charge.layer === \"counter\" && division}\n        <Charge {coa} {charge} {i} shield={coaShield} colors={coaColors} t={tDiv}/>\n      {/if}\n    {/each}\n\n    <!-- division layer -->\n    {#if division && division.division !== \"no\"}\n      <g id=\"division\" clip-path=\"url(#divisionClipMenu{i})\">\n        <rect x=0 y=0 width=200 height=200 fill=\"{coaColors[tDiv] || clr(tDiv)}\"/>\n        {#if ordinary?.divided}\n          {#if ordinary.divided === \"counter\"}<Ordinary {coa} {shieldPath} colors={coaColors} t={coa.t1}/>{/if}\n          {#if ordinary.divided === \"division\"}<Ordinary {coa} {shieldPath} colors={coaColors} t={ordinary.t}/>{/if}\n        {/if}\n        {#each charges as charge, i}\n          {#if charge.layer === \"division\"}\n            <Charge {coa} {charge} {i} shield={coaShield} colors={coaColors} t={charge.t}/>\n          {:else if charge.layer === \"counter\"}\n            <Charge {coa} {charge} {i} shield={coaShield} colors={coaColors} t={coa.t1}/>\n          {/if}\n        {/each}\n      </g>\n    {/if}\n\n    <!-- overall layer -->\n    {#if ordinary && !ordinary.divided}\n      <Ordinary {coa} {shieldPath} colors={coaColors} t={ordinary.t}/>\n    {/if}\n    {#each charges as charge, i}\n      {#if !charge.layer}\n        <Charge {coa} {charge} {i} shield={coaShield} colors={coaColors} t={charge.t}/>\n      {/if}\n    {/each}\n  </g>\n\n  <path d={shieldPath} fill=\"url(#spotlight)\" stroke=\"#333\" stroke-width=\"2\"/>\n</svg>","<script>\n  export let type, updateSection;\n</script>\n\nType:\n<select bind:value={type} on:input={updateSection}>\n  <option value=\"tincture\">Tincture</option>\n  <option value=\"pattern\">Pattern</option>\n  <option value=\"semy\">Semy</option>\n</select>","<script>\n  export let size;\n</script>\n\n<span style=\"margin-left: 1em\">Size:</span>\n<select bind:value={size}>\n  <option value=\"big\">Big</option>\n  <option value=\"standard\">Standard</option>\n  <option value=\"small\">Small</option>\n  <option value=\"smaller\">Smaller</option>\n  <option value=\"smallest\">Smallest</option>\n</select>","<script>\n  import MenuItem from './MenuItem.svelte';\n  export let t1, itemSize;\n  const tinctures = [\"argent\", \"or\", \"gules\", \"sable\", \"azure\", \"vert\", \"purpure\"].map(t => new Object({t1: t}));\n  const cap = string => string.charAt(0).toUpperCase() + string.slice(1);\n</script>\n\n<div>Tincture:</div>\n{#each tinctures as coa}\n  <div class=item class:selected={t1 === coa.t1} on:click={() => t1 = coa.t1}>\n    <MenuItem {coa} title={cap(coa.t1)} {itemSize}/>\n  </div>\n{/each}","<script>\n  export let checked = false;\n  const id = \"switch\" + Math.floor(1e6 * Math.random());\n</script>\n\n<div class=switch>\n  <input id={id} class=switch-input type=checkbox bind:checked/>\n  <label for={id} class=switch-label>Switch</label>\n</div>\n\n<style>\n  .switch {\n    position: relative;\n    display: inline-block;\n    top: -5px;\n  }\n\n  .switch-input {\n    display: none;\n  }\n\n  .switch-label {\n    display: block;\n    width: 48px;\n    height: 24px;\n    color: transparent;\n  }\n\n  .switch-label::before, .switch-label::after {\n    content: \"\";\n    display: block;\n    position: absolute;\n    cursor: pointer;\n  }\n\n  .switch-label::before {\n    width: 100%;\n    height: 100%;\n    background-color: #dedede;\n    border-radius: 9999em;\n    -webkit-transition: background-color 0.25s ease;\n    transition: background-color 0.25s ease;\n  }\n\n  .switch-label::after {\n    top: 0;\n    left: 0;\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    background-color: #fff;\n    box-shadow: 0 0 2px rgba(0, 0, 0, 0.45);\n    -webkit-transition: left 0.25s ease;\n    transition: left 0.25s ease;\n  }\n\n  .switch-input:checked + .switch-label::before {\n    background-color: #89c12d;\n  }\n\n  .switch-input:checked + .switch-label::after {\n    left: 24px;\n  }\n</style>","<script>\n  import Tooltip from './Tooltip.svelte';\n  import Switch from './Switch.svelte';\n  import {grid, showGrid, state} from './stores';\n  export let e;\n\n  function updateGrid() {\n    $state.transform = `rotate(${e.angle||0})`;\n  }\n</script>\n\n<Tooltip tip=\"Element size\">Size:</Tooltip>\n<input type=number min=1 max=500 step=1 value={e.size * 100 | 0} on:input={function() {e.size = this.value / 100}}/>\n\n<Tooltip tip=\"Element rotation\"><span style=\"margin-left: 1em\">Rotation:</span></Tooltip>\n<input style=\"margin-left: 1em\" type=\"number\" min=-180 max=180 bind:value={e.angle} on:change={updateGrid}/>\n\n<Tooltip tip=\"Element shift\"><span style=\"margin-left: 1em\">Shift:</span></Tooltip>\n<input type=\"number\" min=-100 max=100 step={$grid} bind:value={e.x}/>\n<input type=\"number\" min=-100 max=100 step={$grid} bind:value={e.y}/>\n\n<Tooltip tip=\"Grid size: define position shift and drag step\"><span style=\"margin-left: 1em\">Step:</span></Tooltip>\n<input type=\"number\" min=1 max=50 bind:value={$grid}/>\n<Switch bind:checked={$showGrid}/>\n\n<style>\n  input[type=\"number\"] {\n    width: 4em;\n  }\n</style>","<script>\n  export let els, el, i;\n\n  const removeCharge = () => els = els.filter((e, n) => n !== i);\n  const copyCharge = () => els = [...els, JSON.parse(JSON.stringify(el))];\n  const moveUp = () => [els[i], els[i+1]] = [els[i+1], els[i]];\n  const moveDown = () => [els[i], els[i-1]] = [els[i-1], els[i]];\n</script>\n\n<b on:click={removeCharge} title=\"Remove charge\">✖</b>\n<b on:click={copyCharge} title=\"Copy charge\">🗗</b>\n{#if els.length > 1}\n  {#if i}\n    <b on:click={moveDown} title=\"Move charge down\">🠗</b>\n  {/if}\n  {#if i+1 < els.length}\n    <b on:click={moveUp} title=\"Move charge up\">🠕</b>\n  {/if}\n{/if}\n\n<style>\n  b {\n    float: right;\n    padding: .1em;\n    margin: .2em 0 0 .5em;\n    cursor: pointer;\n  }\n\n  b:active {\n    transform: translateY(1px);\n  }\n</style>","import {rw, P} from './utils.js';\nimport {charges, divisions, lines, ordinaries, positions, tinctures} from \"./dataModel.js\";\n\n// main generation routine\nexport const generate = function(seed = Math.floor(Math.random() * 1e9)) {\n  Math.seedrandom(seed); // define Math.random()\n\n  // reset parameters to default\n  tinctures.f = [];\n  tinctures.pattern = null;\n\n  const coa = {seed, t1: getTincture(\"field\")};\n\n  let charge = P(tinctures.pattern ? .5 : .9) ? true : false; // 80% for charge\n  const linedOrdinary = charge && P(.3) || P(.5) ? rw(ordinaries.lined) : null;\n  const ordinary = !charge && P(.6) || P(.3) ? linedOrdinary ? linedOrdinary : rw(ordinaries.straight) : null; // 36% for ordinary\n  const rareDivided = [\"chief\", \"terrace\", \"chevron\", \"quarter\", \"flaunches\"].includes(ordinary);\n  const divisioned = rareDivided ? P(.03) : charge && ordinary ? P(.03) : charge ? P(.3) : ordinary ? P(.7) : P(.995); // 33% for division\n  const division = divisioned ? rw(divisions.variants) : null;\n\n  const selectCharge = () => charge = ordinary || divisioned ? rw(charges[rw(charges.types)]) : rw(charges[rw(charges.single)]);\n  if (charge) selectCharge();\n\n  if (division) {\n    const t = getTincture(\"division\", tinctures.f, P(.98) ? coa.t1 : null);\n    coa.division = {division, t};\n    if (divisions[division]) coa.division.line = tinctures.pattern || (ordinary && P(.7)) ? \"straight\" : rw(divisions[division]);\n  }\n\n  if (ordinary) {\n    coa.ordinary = {ordinary, t: getTincture(\"charge\", tinctures.f, coa.t1)};\n    if (linedOrdinary) coa.ordinary.line = tinctures.pattern || (division && P(.7)) ? \"straight\" : rw(lines);\n    if (division && !charge && !tinctures.pattern && P(.5) && ordinary !== \"bordure\" && ordinary !== \"orle\") {\n      if (P(.8)) coa.ordinary.divided = \"counter\"; // 40%\n      else if (P(.6)) coa.ordinary.divided = \"field\"; // 6%\n      else coa.ordinary.divided = \"division\"; // 4%\n    }\n  }\n\n  if (charge) {\n    let p = \"e\", t = \"gules\", ordinaryT = coa.ordinary?.t;\n    if (positions.ordinariesOn[ordinary] && P(.8)) {\n      // place charge over ordinary (use tincture of field type)\n      p = rw(positions.ordinariesOn[ordinary]);\n      while (charges.natural[charge] === ordinaryT) selectCharge();\n      t = !tinctures.pattern && P(.3) ? coa.t1 : getTincture(\"charge\", [], ordinaryT, charge);\n    } else if (positions.ordinariesOff[ordinary] && P(.95)) {\n      // place charge out of ordinary (use tincture of ordinary type)\n      p = rw(positions.ordinariesOff[ordinary]);\n      while (charges.natural[charge] === coa.t1) selectCharge();\n      t = !tinctures.pattern && P(.3) ? ordinaryT : getTincture(\"charge\", tinctures.f, coa.t1, charge);\n    } else if (positions.divisions[division]) {\n      // place charge in fields made by division\n      p = rw(positions.divisions[division]);\n      while (charges.natural[charge] === coa.t1) selectCharge();\n      t = getTincture(\"charge\", ordinaryT ? tinctures.f.concat(ordinaryT) : tinctures.f, coa.t1, charge);\n    } else if (positions[charge]) {\n      // place charge-suitable position\n      p = rw(positions[charge]);\n      while (charges.natural[charge] === coa.t1) selectCharge();\n      t = getTincture(\"charge\", tinctures.f, coa.t1, charge);\n    } else {\n      // place in standard position (use new tincture)\n      p = tinctures.pattern ? \"e\" : charges.conventional[charge] ? rw(positions.conventional) : rw(positions.complex);\n      while (charges.natural[charge] === coa.t1) selectCharge();\n      t = getTincture(\"charge\", tinctures.f.concat(ordinaryT), coa.t1, charge);\n    }\n\n    if (charges.natural[charge]) t = charges.natural[charge]; // natural tincture\n    coa.charges = [{charge, t, p}];\n\n    if (p === \"ABCDEFGHIKL\" && P(.95)) {\n      // add central charge if charge is in bordure\n      coa.charges[0].charge = rw(charges.conventional);\n      coa.charges.push({\"charge\":rw(charges[rw(charges.single)]), t:getTincture(\"charge\", tinctures.f, coa.t1, charge), p:\"e\"});\n    } else if (P(.8) && charge.slice(0,12) === \"inescutcheon\") {\n      // add charge to inescutcheon\n      coa.charges.push({\"charge\":rw(charges[rw(charges.types)]), t:getTincture(\"charge\", [], t, charge), p, size:.5});\n    } else if (division && !ordinary) {\n      const allowCounter = !tinctures.pattern && (!coa.line || coa.line === \"straight\");\n\n      // dimidiation: second charge at division basic positons\n      if (P(.3) && [\"perPale\", \"perFess\"].includes(division) && coa.line === \"straight\") {\n        coa.charges[0].layer = \"field\";\n        if (P(.95)) {\n          const p2 = p === \"e\" || P(.5) ? \"e\" : rw(positions.divisions[division]);\n          coa.charges.push({\"charge\":rw(charges[rw(charges.single)]), t:getTincture(\"charge\", tinctures.f, coa.t3, charge), p: p2, layer:\"division\"});\n        }\n      }\n      else if (allowCounter && P(.4)) coa.charges[0].layer = \"counter\"; // countercharged, 40%\n      else if ([\"perPale\", \"perFess\", \"perBend\", \"perBendSinister\"].includes(division)) { // place 2 charges in division standard positions\n        const [p1, p2] = division === \"perPale\" ? [\"pp\", \"qq\"] :\n                         division === \"perFess\" ? [\"kk\", \"nn\"] :\n                         division === \"perBend\" ? [\"ll\", \"mm\"] :\n                        [\"jj\", \"oo\"]; // perBendSinister\n        coa.charges[0].p = p1;\n        coa.charges.push({\"charge\":rw(charges[rw(charges.single)]), t:getTincture(\"charge\", tinctures.f, coa.t3, charge), p: p2});\n      }\n      else if (allowCounter && p.length > 1) coa.charges[0].layer = \"counter\"; // countercharged, 40%\n    }\n\n    coa.charges.forEach(c => defineChargeAttributes(c));\n    function defineChargeAttributes(c) {\n      // define size\n      c.size = (c.size || 1) * getSize(c.p, ordinary);\n\n      // clean-up position\n      c.p = [...new Set(c.p)].join(\"\");\n\n      // define orientation\n      if (P(.05) && charges.sinister.includes(c.charge)) c.sinister = 1;\n      if (P(.05) && charges.reversed.includes(c.charge)) c.reversed = 1;\n    }\n  }\n\n  return coa;\n}\n\nexport const getSize = (p, o) => {\n  if (p === \"e\" && (o === \"bordure\" || o === \"orle\")) return 1.1;\n  if (p === \"e\") return 1.5;\n  if ([\"p\", \"q\", \"pp\", \"qq\", \"pq\", \"kn\", \"n\", \"n\", \"kk\", \"nn\", \"oo\", \"jj\"].includes(p)) return .7;\n  if (p === \"jln\" || p === \"jlh\") return .7;\n  if (p === \"abcpqh\") return .5;\n  if (p.length > 10) return .18; // >10 (bordure)\n  if (p.length > 7) return .3; // 8, 9, 10\n  if (p.length > 4) return .4; // 5, 6, 7\n  return .5; // 1, 2, 3, 4\n}\n\n// select tincture: element type (field, division, charge), all field tinctures, field type to follow RoT\nfunction getTincture(element, fields = [], RoT, charge) {\n  if (charge && tinctures[charge]) element = charge;\n  const base = RoT ? RoT.includes(\"-\") ? RoT.split(\"-\")[1] : RoT : null;\n\n  let type = rw(tinctures[element]);\n  if (type !== \"patterns\" && base) type = getType(base) === \"metals\" ? \"colours\" : \"metals\";\n  if (type === \"metals\" && fields.includes(\"or\") && fields.includes(\"argent\")) type = \"colours\";\n  let tincture = rw(tinctures[type][element]);\n\n  while (tincture === base || fields.includes(tincture)) {tincture = rw(tinctures[type][element]);}\n\n  if (type !== \"patterns\" && element !== \"charge\") tinctures.f.push(tincture); // add field tincture\n\n  if (type === \"patterns\") {\n    tinctures.pattern = tincture;\n    tincture = definePattern(tincture, element);\n  }\n\n  return tincture;\n}\n\nfunction definePattern(pattern, element, size = \"\") {\n  let t1 = null, t2 = null;\n  if (P(.15)) size = \"-small\";\n  else if (P(.05)) size = \"-smaller\";\n  else if (P(.035)) size = \"-big\";\n  else if (P(.001)) size = \"-smallest\";\n\n  // apply standard tinctures\n  if (P(.5) && [\"vair\", \"vairInPale\", \"vairEnPointe\"].includes(pattern)) {t1 = \"azure\"; t2 = \"argent\";}\n  else if (P(.8) && pattern === \"ermine\") {t1 = \"argent\"; t2 = \"sable\";}\n  else if (pattern === \"pappellony\") {\n    if (P(.2)) {t1 = \"gules\"; t2 = \"or\";}\n    else if (P(.2)) {t1 = \"argent\"; t2 = \"sable\";}\n    else if (P(.2)) {t1 = \"azure\"; t2 = \"argent\";}\n  }\n  else if (pattern === \"masoned\") {\n    if (P(.3)) {t1 = \"gules\"; t2 = \"argent\";}\n    else if (P(.3)) {t1 = \"argent\"; t2 = \"sable\";}\n    else if (P(.1)) {t1 = \"or\"; t2 = \"sable\";}\n  }\n  else if (pattern === \"fretty\") {\n    if (t2 === \"sable\" || P(.35)) {t1 = \"argent\"; t2 = \"gules\";}\n    else if (P(.25)) {t1 = \"sable\"; t2 = \"or\";}\n    else if (P(.15)) {t1 = \"gules\"; t2 = \"argent\";}\n  }\n  else if (pattern === \"semy\") pattern += \"_of_\" + rw(charges[rw(charges.semy)]);\n\n  if (!t1 || !t2) {\n    const startWithMetal = P(.7);\n    t1 = startWithMetal ? rw(tinctures.metals[element]) : rw(tinctures.colours[element]);\n    t2 = startWithMetal ? rw(tinctures.colours[element]) : rw(tinctures.metals[element]);\n  }\n\n  // division should not be the same tincture as base field\n  if (element === \"division\") {\n    if (tinctures.f.includes(t1)) t1 = replaceTincture(t1);\n    if (tinctures.f.includes(t2)) t2 = replaceTincture(t2);\n  }\n\n  tinctures.f.push(t1, t2);\n  return `${pattern}-${t1}-${t2}${size}`;\n}\n\nfunction replaceTincture(t, n) {\n  if (t === \"or\") return \"argent\";\n  if (t === \"argent\") return \"or\";\n\n  const type = getType(t);\n  while (!n || n === t) {n = rw(tinctures[type].division);}\n  return n;\n}\n\nfunction getType(t) {\n  const tincture = t.includes(\"-\") ? t.split(\"-\")[1] : t;\n  if (tincture === \"argent\" || tincture === \"or\") return \"metals\";\n  return \"colours\";\n}","<script>\n  import COA from './COA.svelte';\n  import MenuItem from './MenuItem.svelte';\n  import EditorType from './EditorType.svelte';\n  import EditorSize from './EditorSize.svelte';\n  import EditorTincture from './EditorTincture.svelte';\n  import EditorShift from \"./EditorShift.svelte\";\n  import EditorControlButtons from \"./EditorControlButtons.svelte\";\n  import Switch from './Switch.svelte';\n  import Tooltip from './Tooltip.svelte';\n  import {slide, fly} from 'svelte/transition';\n  import {rw} from './utils.js';\n  import {changes, state, grid, showGrid, message} from './stores';\n  import {charges, tinctures, divisions, ordinaries, lines, positionsSelect} from \"./dataModel.js\";\n  import {getSize} from './generator.js';\n  export let coa, c;\n\n  const min = Math.min(window.innerWidth, window.innerHeight);\n  const ratio = window.innerHeight / window.innerWidth;\n  const coaSize = Math.round(min * .9);\n  let width = window.innerWidth < 600 || ratio > 1 ? 100 : Math.round((1.05 - ratio) * 100);\n  if (width / 100 * window.innerWidth < 300) width = 100;\n  const itemSize = width / 1000 * window.innerWidth - 3; // ~10 items in row\n\n  const patterns = [\"vair\", \"vairInPale\", \"vairEnPointe\", \"ermine\", \"chequy\", \"lozengy\", \"fusily\", \"pally\", \"barry\", \"gemelles\", \"bendy\", \"bendySinister\", \"palyBendy\", \"pappellony\", \"masoned\", \"fretty\"];\n  const chargeTypes = Object.keys(charges.types);\n  const ordinariesList = [\"no\"].concat(Object.keys(ordinaries.lined)).concat(Object.keys(ordinaries.straight));\n\n  let menu = {}, change = 0;\n\n  $state.transform = null;\n  $state.positions = null;\n\n  // on reroll\n  $: defineMenuState(c);\n\n  // on coa change\n  $: {\n    if (change) changes.add(JSON.stringify(coa));\n    change = 1;\n  }\n\n  // on undo or redo\n  $: {\n    if (changes.length()) {\n      coa = JSON.parse($changes[0]);\n      defineMenuState();\n      change = 0;\n    }\n  }\n\n  // define initial menu state, run only when new coa is passed\n  function defineMenuState() {\n    // Field\n    menu.field = getField();\n    function getField() {\n      const type = isSemy(coa.t1) ? \"semy\" : isPattern(coa.t1) ? \"pattern\" : \"tincture\";\n      let t1, t2, pattern = \"vair\", charge = \"lozenge\", semy = \"conventional\", size = \"standard\";\n\n      const field = coa.t1.split(\"-\"); // parsed field tincture\n\n      if (type === \"tincture\") {\n        t1 = coa.t1;\n        t2 = selectSecondTincture(coa.t1, \"field\");\n      } else {\n        t1 = field[1];\n        t2 = field[2];\n        size = field[3] || \"standard\"\n      }\n\n      if (type === \"pattern\") pattern = field[0];\n      else if (type === \"semy\") {\n        charge = getSemyCharge(field);\n        semy = getSemyType(field);\n      }\n\n      return {type, t1, t2, pattern, charge, semy, size}\n    }\n\n    // Division\n    menu.division = getDivision();\n    function getDivision() {\n      let type = \"tincture\", division = \"no\", line = \"straight\", t1, t2, pattern = \"vair\", charge = \"lozenge\", semy = \"conventional\", size = \"standard\";\n\n      if (coa.division) {\n        const tSplit = coa.division.t.split(\"-\"); // parsed division tincture\n        type = isSemy(coa.division.t) ? \"semy\" : isPattern(coa.division.t) ? \"pattern\" : \"tincture\";\n\n        division = coa.division.division;\n        line = coa.division.line || \"straight\";\n        t1 = type === \"tincture\" ? coa.division.t : tSplit[1];\n        t2 = type === \"tincture\" ? selectSecondTincture(t1, \"division\") : tSplit[2];\n        if (type === \"pattern\") pattern = tSplit[0];\n        if (type === \"semy\") {\n          charge = getSemyCharge(tSplit);\n          semy = getSemyType(tSplit);\n        }\n        size = tSplit[3] || \"standard\";\n      } else {\n        t1 = selectSecondTincture(menu.field.t1, \"division\");\n        t2 = selectSecondTincture(t1, \"division\");\n      }\n\n      return {division, line, type, t1, t2, pattern, charge, semy, size};\n    }\n\n    // Ordinary\n    menu.ordinary = getOrdinary();\n    function getOrdinary() {\n      let ordinary = \"no\", line = \"straight\", t, divided = \"\", size = 1, x = 0, y = 0, angle = 0;\n\n      if (coa.ordinary) {\n        ordinary = coa.ordinary.ordinary;\n        line = coa.ordinary.line || \"straight\";\n        t = coa.ordinary.t;\n        divided = coa.ordinary.divided || \"\";\n        size = coa.ordinary.size || 1;\n        x = coa.ordinary.x || 0;\n        y = coa.ordinary.y || 0;\n        angle = coa.ordinary.angle || 0;\n        if (angle) updateGrid(coa.ordinary);\n      } else {\n        t = rw(tinctures[\"colours\"][\"charge\"]);\n      }\n\n      return {ordinary, line, t, divided, size, x, y, angle}\n    }\n\n    // Charges\n    menu.charges = getCharges();\n    function getCharges() {\n      if (!coa.charges) return [];\n      const charges = coa.charges.map(c => {\n        const {charge, t, p, size} = c;\n        const type = getChargeType(charge);\n        const layer = c.layer || \"\";\n        const sinister = c.sinister || false;\n        const reversed = c.reversed || false;\n        const x = c.x || 0;\n        const y = c.y || 0;\n        const angle = c.angle || 0;\n        if (angle) updateGrid(c);\n        return {charge, type, layer, t, p, size, sinister, reversed, x, y, angle};\n      });\n\n      return charges;\n    }\n\n    function isPattern(string) {\n      return string?.includes(\"-\");\n    }\n\n    function isSemy(string) {\n      return string?.slice(0,4) === \"semy\";\n    }\n\n    function getSemyCharge(array) {\n      return array[0].split(\"_of_\")[1];\n    }\n\n    function getChargeType(charge) {\n      return chargeTypes.find(type => charges[type][charge]);\n    }\n\n    function getSemyType(array) {\n      const charge = getSemyCharge(array);\n      return getChargeType(charge);\n    }\n\n    function selectSecondTincture(t1, type) {\n      const metal = t1 === \"argent\" || t1 === \"or\";\n      const tincturesType = metal ? tinctures[\"colours\"] : tinctures[\"metals\"];\n      return rw(tincturesType[type]);\n    }\n\n    return menu;\n  }\n\n  function addCharge() {\n    const type = rw(charges.single);\n    const charge = rw(charges[type]);\n    const t = rw(tinctures[rw(tinctures.charge)].charge);\n    const с = {charge, t, p: \"e\", type, size: 1.5, sinister: false, reversed: false, x: 0, y: 0, angle: 0, layer: \"\"};\n    menu.charges = [...menu.charges, с];\n  }\n\n  // field attributes changed\n  $: {\n    if (menu.field.type === \"tincture\") coa.t1 = menu.field.t1; else {\n      const type = menu.field.type === \"semy\" ? \"semy_of_\" + menu.field.charge : menu.field.pattern;\n      const attibutes = [type, menu.field.t1, menu.field.t2];\n      if (menu.field.size !== \"standard\") attibutes.push(menu.field.size);\n      coa.t1 = attibutes.join(\"-\");\n    }\n  }\n\n  // division attributes changed\n  $: {\n    if (menu.division.division && menu.division.division !== \"no\") {\n      coa.division = {division: menu.division.division};\n      if (divisions[menu.division.division]) coa.division.line = menu.division.line;\n      if (menu.division.type === \"tincture\") coa.division.t = menu.division.t1;\n      else {\n        const attr0 = menu.division.type === \"semy\" ? \"semy_of_\" + menu.division.charge : menu.division.pattern;\n        const attibutes = [attr0, menu.division.t1, menu.division.t2];\n        if (menu.division.size !== \"standard\") attibutes.push(menu.division.size);\n        coa.division.t = attibutes.join(\"-\");\n      }\n    } else delete coa.division;\n  }\n\n  // ordinary attributes changed\n  $: {\n    const o = menu.ordinary;\n    if (o && o.ordinary !== \"no\") {\n      coa.ordinary = {ordinary: o.ordinary, t: o.t};\n      if (ordinaries.lined[o.ordinary]) coa.ordinary.line = o.line;\n      if (coa.division) coa.ordinary.divided = o.divided;\n\n      if (o.x || o.y) {coa.ordinary.x = o.x; coa.ordinary.y = o.y;}\n      if (o.angle) coa.ordinary.angle = o.angle;\n      if (o.size && o.size !== 1) coa.ordinary.size = o.size;\n    } else delete coa.ordinary;\n  }\n\n  // charges attributes changed\n  $: {\n    if (menu.charges.length) {\n      coa.charges = menu.charges.map(c => {\n        const item = {charge: c.charge, t: c.t, p: c.p, size: c.size};\n        if (c.layer) item.layer = c.layer;\n        if (c.sinister) item.sinister = 1;\n        if (c.reversed) item.reversed = 1;\n        if (c.x || c.y) {item.x = c.x; item.y = c.y;}\n        if (c.angle) item.angle = c.angle;\n        return item;\n      });\n    } else delete coa.charges;\n  }\n\n  // on grid change\n  $: localStorage.setItem(\"grid\", $grid);\n  $: localStorage.setItem(\"showGrid\", $showGrid);\n\n  if (!isTouchDevice() && (coa.ordinary || coa.charges)) {\n    $message = {type: \"info\", text: \"Drag to move, hold SHIFT and drag vertically to resize, hold CONTROL and drag horizontally to rotate\", timeout: 5000};\n  }\n\n  function isTouchDevice() {\n    return 'ontouchstart' in window;\n  }\n\n  function showSection(e) {\n    e.target.classList.toggle(\"expanded\");\n    const panel = e.target.nextElementSibling;\n    if (panel.style.maxHeight) panel.style.maxHeight = null;\n    else panel.style.maxHeight = panel.scrollHeight + \"px\";\n  }\n\n  function updateSection(e) {\n    const panel = e.currentTarget.closest(\".panel\");\n    setTimeout(() => panel.style.maxHeight = panel.scrollHeight + \"px\", 100);\n  }\n\n  function showPositions(c) {\n    $state.transform = `rotate(${c.angle||0}) translate(${c.x||0}, ${c.y||0})`;\n    $state.positions = c.p;\n  }\n\n  function updateGrid(c) {\n    $state.transform = `rotate(${c.angle||0})`;\n  }\n\n  function isRaster(charge) {\n    const el = document.getElementById(charge);\n    return el ? el.tagName === \"image\" : false;\n  }\n\n  function cap(string = \"no\") {\n    const split = string.split(/(?=[A-Z])/).join(\" \");\n    return split.charAt(0).toUpperCase() + split.slice(1);\n  }\n</script>\n\n<div id=\"editor\">\n  {#key coa}\n    <COA {coa} i=\"Edit\" w={coaSize} h={coaSize}/>\n  {/key}\n  <div id=\"menu\" in:fly={{x:500, duration:1000}} style=\"width:{width}%\">\n    <!-- Field -->\n    <div class=\"section\" class:expanded={false} on:click={showSection}>Field</div>\n    <div class=\"panel\">\n      <div class=\"subsection\">\n        <EditorType bind:type={menu.field.type} {updateSection}/>\n        {#if menu.field.type !== \"tincture\"}\n          <EditorSize bind:size={menu.field.size}/>\n        {/if}\n      </div>\n\n      <div class=\"subsection\">\n        <EditorTincture bind:t1={menu.field.t1} {itemSize}/>\n      </div>\n\n      {#if menu.field.type !== \"tincture\"}\n        <div class=\"subsection\">\n          <EditorTincture bind:t1={menu.field.t2} {itemSize}/>\n        </div>\n      {/if}\n\n      {#if menu.field.type === \"pattern\"}\n        <div class=\"subsection\">\n          <div>Pattern:</div>\n          {#each patterns.map(p => new Object({t1: `${p}-${menu.field.t1}-${menu.field.t2}-${menu.field.size}`, pattern: p})) as coa}\n            <div class=item class:selected={menu.field.pattern === coa.pattern} on:click={() => menu.field.pattern = coa.pattern}>\n              <MenuItem {coa} title={cap(coa.pattern)} {itemSize}/>\n            </div>\n          {/each}\n        </div>\n      {/if}\n\n      {#if menu.field.type === \"semy\"}\n        <div class=\"subsection\">\n          <div>Charge:\n            <select bind:value={menu.field.semy}>\n              {#each chargeTypes as type}\n                <option value={type}>{cap(type)}</option>\n              {/each}\n            </select>\n          </div>\n\n          {#each Object.keys(charges[menu.field.semy]).map(c => new Object({t1: `semy_of_${c}-${menu.field.t1}-${menu.field.t2}-${menu.field.size}`, charge: c})) as coa (coa)}\n            <div class=item class:selected={menu.field.charge === coa.charge} on:click={() => menu.field.charge = coa.charge}>\n              <MenuItem {coa} title={cap(coa.charge)} {itemSize}/>\n            </div>\n          {/each}\n        </div>\n      {/if}\n    </div>\n\n    <!-- Division -->\n    <div class=\"section\" on:click={showSection}>Division</div>\n    <div class=\"panel\">\n      <div class=\"subsection\" on:click={updateSection}>\n        {#each [\"no\"].concat(Object.keys(divisions.variants)).map(division => new Object({t1: coa.t1, division: {division, t: coa.division ? coa.division.t : menu.division.t1, line: menu.division.line}})) as coa (coa)}\n          <div class=item class:selected={menu.division.division === coa.division.division} on:click={() => menu.division.division = coa.division.division}>\n            <MenuItem {coa} title={cap(coa.division.division)} {itemSize}/>\n          </div>\n        {/each}\n      </div>\n\n      {#if divisions[coa.division?.division]}\n        <div class=\"subsection\">\n          <div>Line:</div>\n          {#each Object.keys(lines).map(line => new Object({t1: coa.t1, division: {division: menu.division.division, t: coa.division ? coa.division.t : menu.division.t1, line}})) as coa (coa)}\n            <div class=item class:selected={menu.division.line === coa.division.line} on:click={() => menu.division.line = coa.division.line}>\n              <MenuItem {coa} title={cap(coa.division.line)} {itemSize}/>\n            </div>\n          {/each}\n        </div>\n      {/if}\n\n      {#if coa.division}\n        <div class=\"subsection\">\n          <EditorType bind:type={menu.division.type} {updateSection}/>\n          {#if menu.division.type !== \"tincture\"}\n            <EditorSize bind:size={menu.division.size}/>\n          {/if}\n        </div>\n\n        <div class=\"subsection\">\n          <EditorTincture bind:t1={menu.division.t1} {itemSize}/>\n        </div>\n\n        {#if menu.division.type !== \"tincture\"}\n          <div class=\"subsection\">\n            <EditorTincture bind:t1={menu.division.t2} {itemSize}/>\n          </div>\n        {/if}\n\n        {#if menu.division.type === \"pattern\"}\n          <div class=\"subsection\">\n            <div>Pattern:</div>\n            {#each patterns.map(p => new Object({t1: `${p}-${menu.division.t1}-${menu.division.t2}-${menu.division.size}`, pattern: p})) as coa}\n              <div class=item class:selected={menu.division.pattern === coa.pattern} on:click={() => menu.division.pattern = coa.pattern}>\n                <MenuItem {coa} title={cap(coa.pattern)} {itemSize}/>\n              </div>\n            {/each}\n          </div>\n        {/if}\n\n        {#if menu.division.type === \"semy\"}\n          <div class=\"subsection\">\n            <div>Charge:\n              <select bind:value={menu.division.semy}>\n                {#each chargeTypes as type}\n                  <option value={type}>{cap(type)}</option>\n                {/each}\n              </select>\n            </div>\n\n            {#each Object.keys(charges[menu.division.semy]).map(c => new Object({t1: `semy_of_${c}-${menu.division.t1}-${menu.division.t2}-${menu.division.size}`, charge: c})) as coa (coa)}\n              <div class=item class:selected={menu.division.charge === coa.charge} on:click={() => menu.division.charge = coa.charge}>\n                <MenuItem {coa} title={cap(coa.charge)} {itemSize}/>\n              </div>\n            {/each}\n          </div>\n        {/if}\n      {/if}\n    </div>\n\n    <!-- Ordinary -->\n    <div class=\"section\" on:click={showSection}>Ordinary</div>\n    <div class=\"panel\">\n      {#if coa.division}\n        <div class=\"subsection\" on:click={updateSection}>\n          Divided:\n          <select bind:value={menu.ordinary.divided}>\n            <option value=\"\">No (standard)</option>\n            <option value=field>Crop by main field</option>\n            <option value=division>Crop by division</option>\n            <option value=counter>Сountercharged</option>\n          </select>\n        </div>\n      {/if}\n\n      <div class=\"subsection\" on:click={updateSection}>\n        {#each ordinariesList.map(ordinary => new Object({t1: coa.t1, division: coa.division, ordinary: {ordinary, line: menu.ordinary.line, t: menu.ordinary.t, divided: menu.ordinary.divided}})) as coa (coa)}\n          <div class=item class:selected={menu.ordinary.ordinary === coa.ordinary.ordinary} on:click={() => menu.ordinary.ordinary = coa.ordinary.ordinary}>\n            <MenuItem {coa} title={cap(coa.ordinary.ordinary)} {itemSize}/>\n          </div>\n        {/each}\n      </div>\n    \n      {#if ordinaries.lined[menu.ordinary.ordinary]}\n        <div class=\"subsection\">\n          <div>Line:</div>\n          {#each Object.keys(lines).map(line => new Object({t1: coa.t1, division: coa.division, ordinary: {ordinary: menu.ordinary.ordinary, line, t: menu.ordinary.t, divided: menu.ordinary.divided}})) as coa (coa)}\n            <div class=item class:selected={menu.ordinary.line === coa.ordinary.line} on:click={() => menu.ordinary.line = coa.ordinary.line}>\n              <MenuItem {coa} title={cap(coa.ordinary.line)} {itemSize}/>\n            </div>\n          {/each}\n        </div>\n      {/if}\n\n      {#if coa.ordinary && menu.ordinary.divided !== \"counter\"}\n        <div class=\"subsection\">\n          <EditorTincture bind:t1={menu.ordinary.t} {itemSize}/>\n        </div>\n      {/if}\n\n      <div class=\"subsection\">\n        <EditorShift bind:e={menu.ordinary}/>\n      </div>\n    </div>\n\n    <!-- Charges -->\n    {#each menu.charges as charge, i}\n      <div class=\"section\" in:slide on:click={showSection}>Charge {menu.charges.length > 1 ? i+1 : \"\"}</div>\n      <div class=\"panel\">\n\n        <div class=\"subsection\">\n          <div>Category:\n            <select bind:value={charge.type} on:input={updateSection}>\n              {#each chargeTypes as type}\n                <option value={type}>{cap(type)}</option>\n              {/each}\n            </select>\n\n            {#if coa.division}\n              <span style=\"margin-left: 1em\">Divided:</span>\n              <select bind:value={charge.layer}>\n                <option value=\"\">No (standard)</option>\n                <option value=field>Crop by main field</option>\n                <option value=division>Crop by division</option>\n                {#if !isRaster(charge.charge)}\n                  <option value=counter>Сountercharged</option>\n                {/if}\n              </select>\n            {/if}\n\n            <EditorControlButtons bind:els={menu.charges} el={charge} {i}/>\n          </div>\n\n          {#each Object.keys(charges[charge.type]).map(c => new Object({c, t1: coa.t1, charges: [{charge:c, t: charge.t, p:\"e\", size: 1.5, sinister: charge.sinister, reversed: charge.reversed}]})) as coa (coa)}\n            <div class=item class:selected={charge.charge === coa.c} on:click={() => charge.charge = coa.c}>\n              <MenuItem {coa} title={cap(coa.c)} {itemSize}/>\n            </div>\n          {/each}\n        </div>\n\n        {#if !isRaster(charge.charge) && charge.layer !== \"counter\"}\n          <div class=\"subsection\">\n            <EditorTincture bind:t1={charge.t} {itemSize}/>\n          </div>\n        {/if}\n\n        <div class=\"subsection\">\n          <Tooltip tip=\"Points on shield to place a charge\">Positions:</Tooltip>\n          <input style=\"margin-left: .6em; width: 8.6em\" bind:value={charge.p} on:input={() => showPositions(charge)} on:focus={() => showPositions(charge)} on:blur={() => $state.positions = 0}/>\n          <select class=\"pseudoSelect\" bind:value={charge.p} on:change={() => {charge.size = getSize(charge.p, menu.ordinary.ordinary); showPositions(charge);}} on:focus={() => showPositions(charge)} on:blur={() => $state.positions = 0}>\n            {#each positionsSelect as position}\n              <option value={position}>{position}</option>\n            {/each}\n          </select>\n\n          <Tooltip tip=\"Turn charge to the left\"><span style=\"margin-left: 1em\">Sinister:</span></Tooltip>\n          <Switch bind:checked={charge.sinister}/>\n\n          <Tooltip tip=\"Show charge upside down\"><span style=\"margin-left: 1em\">Reversed:</span></Tooltip>\n          <Switch bind:checked={charge.reversed}/>\n        </div>\n\n        <div class=\"subsection\">\n          <EditorShift bind:e={charge}/>\n        </div>\n      </div>\n    {/each}\n\n    <div class=\"buttonLine\" on:click={addCharge}>Add charge</div>\n  </div>\n</div>\n\n<style>\n  #editor {\n    width: 100%;\n    height: calc(100% - 45px);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    user-select: none;\n    flex-direction: row;\n  }\n\n  #menu {\n    overflow-x: hidden;\n    overflow-y: auto;\n    scrollbar-width: thin;\n    transition: .5s;\n    background-color: #11111180;\n    height: 100%;\n  }\n\n  @media only screen and (orientation: portrait) {\n    #editor {\n      flex-direction: column;\n    }\n  }\n\n  #menu::-webkit-scrollbar {\n    width: 6px;\n    background-color: #cccccc80;\n  }\n\n  #menu::-webkit-scrollbar-thumb {\n    background-color: #111;\n  }\n\n  .section {\n    padding: 1em 1.14em;\n    color: #fff;\n    background-color: #00000060;\n    cursor: pointer;\n    transition: background-color .1s ease;\n    overflow-x: hidden;\n  }\n\n  .section:hover {\n    background-color: #00000080;\n  }\n\n  .section:before {\n    content: \"\\276F\";\n    transition: .2s ease-out;\n    margin-top: -.1em;\n    position: absolute;\n    right: 1em;\n  }\n\n  .expanded:before {\n    transform: rotate(90deg);\n  }\n\n  .panel {\n    max-height: 0;\n    min-width: 100%;\n    max-width: max-content;\n    transition: max-height .2s ease-out;\n    background-color: #13131320;\n    overflow: hidden;\n  }\n\n  .subsection {\n    color: #fff;\n    padding: .5em 1em;\n  }\n\n  .subsection select {\n    margin-left: .6em;\n    cursor: pointer;\n  }\n\n  .buttonLine {\n    padding: 1em 1.14em;\n    color: #fff;\n    background-color: #00000060;\n    cursor: pointer;\n    transition: background-color .1s ease;\n  }\n\n  .buttonLine:hover {\n    background-color: #00000080;\n  }\n\n  select.pseudoSelect {\n    width: 1.3em;\n    margin-left: -1.6em;\n    border: 0;\n  }\n\n  :global(.item) {\n    display: inline-block;\n    cursor: pointer;\n    transition: background-color .2s ease;\n  }\n\n  :global(.item:hover) {\n    background-color: #ffffff10;\n  }\n\n  :global(.item:active) {\n    transform: translateY(1px);\n  }\n\n  :global(.item.selected) {\n    background-color: #ffffff15;\n  }\n</style>","<script>\n  import COA from './COA.svelte';\n  import {fade} from 'svelte/transition';\n  import {generate} from './generator.js';\n  import {download} from './download.js';\n  import {history, matrices, matrix, state} from './stores';\n  export let gallery, w, h;\n\n  $:coas = gallery.map(c => {\n    let coa = $history[c] || generate();\n    if (!$history[c]) $history[c] = coa;\n    return coa;\n  });\n\n  function regenerate(i) {\n    const coa = generate();\n    gallery[i] = $history.length;\n    $matrix++;\n    $matrices[$matrix] = gallery;\n    $history.push(coa);\n    coas[i] = coa;\n  }\n\n  function editCOA(i) {\n    $state.edit = 1;\n    $state.c = gallery[i];\n    $state.i = i;\n  }\n</script>\n\n<div id=\"gallery\" style=\"font-size: {Math.ceil(w/20)}px\" transition:fade>\n  {#each coas as coa, i}\n    <div>\n      {#key coa}\n        <COA {coa} {i} {w} {h}/>\n      {/key}\n        <div class=\"control\">\n        <svg on:click={() => regenerate(i)}><use href=\"#dice-icon\"></use></svg>\n        <svg on:click={() => editCOA(i)}><use href=\"#pencil-icon\"></use></svg>\n        <svg on:click={() => download(i)}><use href=\"#download-icon\"></use></svg>\n      </div>\n    </div>\n  {/each}\n</div>\n\n<style>\n  div {\n    display: inline-table;\n  }\n\n  #gallery > div {\n    display: inline-block;\n    position: relative;\n    user-select: none;\n    transition: background .5s ease;\n  }\n\n  #gallery > div:hover {\n    background: #00000020;\n  }\n\n  .control {\n    display: block;\n    position: absolute;\n    opacity: 0;\n    transition: .5s ease-in-out;\n    color: #f1f1f1;\n    transform: translate(-50%, -150%);\n    left: 50%;\n    font-size: 2em;\n    white-space: nowrap;\n  }\n\n  #gallery > div:hover > .control {\n    opacity: 1;\n  }\n\n  .control > svg {\n    width: 1.2em;\n    height: 1.2em;\n    fill: #f1f1f1;\n    stroke: #333;\n    stroke-width: .5em;\n    vertical-align: middle;\n    margin: 0 .5em;\n    padding: .2em;\n    cursor: pointer;\n  }\n\n  .control > svg:hover {\n    background-color: #44444490;\n    color: #fff;\n  }\n\n  .control > svg:active {\n    transform: translateY(1px);\n  }\n</style>","<script>\n  import {state, message} from \"./stores\";\n  import {charges} from \"./dataModel.js\";\n  import {camelize} from './utils.js';\n  let dragging = false, selected = false;\n  let size = 50, offsetX = 0, offsetY = 0;\n  let name, category;\n\n  const categories = Object.keys(charges.types);\n\n  const onFile = (getFilesFunction) => (event) => {\n    dragging = false;\n    const files = getFilesFunction(event);\n    const file = files.length ? files[0] : [];\n\n    if (!file.type.match(/image.*/)) {\n      $message = {type: \"error\", text: \"Not an image file!\"};\n      return;\n    }\n\n    selected = true;\n    $message = {type: \"info\", text: \"Fit image into the rectangle for best result\"};\n    name = camelize(file.name);\n    loadImage(file);\n  };\n\n  function getFilesFromDropEvent({ dataTransfer: { files, items } }) {\n    return files.length ? [...files] : items.filter(({ kind }) => kind === \"file\").map(({ getAsFile }) => getAsFile());\n  }\n\n  function getFilesFromInputEvent({ target }) {\n    const files = target.files ? [...target.files] : [];\n    target.value = \"\";\n    return files;\n  }\n\n  function loadImage(file) {\n    const reader = new FileReader();\n    reader.onload = function (readerEvent) {\n      const dataURL = readerEvent.target.result;\n      const image = document.getElementById(\"rasterUpload\").querySelector(\"svg image\");\n      image.setAttribute(\"href\", dataURL);\n    };\n    reader.readAsDataURL(file);\n  }\n\n  function addCharge() {\n    name = camelize(name);\n\n    if (!name || document.getElementById(name)) {\n      $message = {type: \"error\", text: \"Name must be unique id!\"};\n      return;\n    }\n\n    if (!charges[category]) {\n      charges[category] = {};\n      charges.types[category] = 5;\n      charges.single[category] = 5;\n    }\n    charges[category][name] = 5;\n\n    const image = document.getElementById(\"rasterUpload\").querySelector(\"svg image\").cloneNode(true);\n    image.id = name;\n    document.getElementById(\"charges\").appendChild(image);\n\n    selected = false;\n    $state.raster = 0;\n  }\n</script>\n\n<div id=rasterUpload\n  on:drop|preventDefault={onFile(getFilesFromDropEvent)}\n  on:dragover|preventDefault={() => (dragging = true)}\n  on:dragleave|preventDefault={() => (dragging = false)}>\n  <span on:click={() => $state.raster = 0} class=\"close\">&times;</span>\n  <div class=container>\n    {#if selected}\n      <div class=input>\n        <div><div class=label>Size:</div><input type=number bind:value={size}/></div>\n        <div><div class=label>Offset X:</div><input type=number bind:value={offsetX}/></div>\n        <div><div class=label>Offset Y:</div><input type=number bind:value={offsetY}/></div>\n      </div>\n\n      <div class=exampleCOA>\n        <svg width=100% height=100% viewBox=\"0 0 200 200\">\n          <g clip-path=\"url(#heater)\" stroke=\"#fff\" stroke-width=.5>\n            <rect x=0 y=0 width=100% height=100% fill=#377cd7/>\n            <image id=imageLoaded x={(100 - size) / 2 + offsetX}% y={(100 - size) / 2 + offsetY}% width={size}% height={size}%/>\n            <rect x=30% y=30% width=40% height=40% fill=none stroke=#000 stroke-width=.5/>\n            <g stroke=#000 fill=\"url(#backlight)\">\n              <path d=\"M25,25 h150 v50 a150,150,0,0,1,-75,125 a150,150,0,0,1,-75,-125 z\"/>\n            </g>\n          </g>\n        </svg>\n      </div>\n\n      <div class=output>\n        <div><div class=label>Name:</div><input placeholder=\"Charge name\" required bind:value={name}/></div>\n        <div><div class=label>Category:</div>\n          <select bind:value={category}>\n            <option value=uploaded selected>uploaded</option>\n            {#each categories as c}\n              <option value={c}>{c}</option>\n            {/each}\n          </select>\n        </div>\n        <div class=buttons>\n          <button on:click={addCharge}>Add</button>\n          <button on:click={() => selected = false}>Cancel</button>\n        </div>\n      </div>\n    {:else}\n      <label class=dragging>\n        <slot {dragging}>\n          <div>Drag &amp; Drop image here or browse</div>\n        </slot>\n        <input type=file accept=image/* on:input={onFile(getFilesFromInputEvent)} />\n      </label>\n    {/if}\n  </div>\n</div>\n\n<style>\n  #rasterUpload {\n    height: 100%;\n    width: 100%;\n    position: fixed;\n    z-index: 1;\n    left: 0;\n    top: 0;\n    background-color: rgba(0, 0, 0, 0.9);\n    transition: 0.5s;\n    user-select: none;\n  }\n\n  .container {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: #ddd;\n    display: flex;\n    flex-flow: row;\n    align-items: center;\n    justify-content: center;\n  }\n\n  @media only screen and (orientation: portrait) {\n    .container {\n      flex-flow: column;\n    }\n  }\n\n  .exampleCOA {\n    text-align: center;\n    width: max-content;\n  }\n\n  .buttons {\n    text-align: center;\n  }\n\n  input, select {\n    width: 10em;\n  }\n\n  .buttons > button {\n    cursor: pointer;\n    margin: 1em .1em;\n    width: 4em;\n  }\n\n  input[type=\"file\"] {\n    display: none;\n  }\n\n  .close {\n    position: fixed;\n    top: 0em;\n    right: 0.5em;\n    font-size: 4em;\n    padding: 0.2em 0;\n    display: inline-block;\n    color: #ddd;\n  }\n\n  label:hover,\n  span:hover {\n    cursor: pointer;\n    color: #fff;\n  }\n\n  .dragging {\n    width: max-content;\n  }\n</style>\n","<script>\n  import {state, colors, message} from \"./stores\";\n  import {charges} from \"./dataModel.js\";\n  import {camelize} from './utils.js';\n  let dragging = false, selected = false;\n  let svg, name, category, color = \"#d7374a\";\n\n  const categories = Object.keys(charges.types);\n\n  const onFile = (getFilesFunction) => (event) => {\n    dragging = false;\n    const files = getFilesFunction(event);\n    const file = files.length ? files[0] : [];\n\n    if (!file.type.match(/text.*|svg.*/)) {\n      $message = {type: \"error\", text: \"File must be text or svg!\"};\n      return;\n    }\n\n    selected = true;\n    name = camelize(file.name);\n    loadImage(file);\n  };\n\n  function getFilesFromDropEvent({ dataTransfer: { files, items } }) {\n    return files.length ? [...files] : items.filter(({ kind }) => kind === \"file\").map(({ getAsFile }) => getAsFile());\n  }\n\n  function getFilesFromInputEvent({ target }) {\n    const files = target.files ? [...target.files] : [];\n    target.value = \"\";\n    return files;\n  }\n\n  function loadImage(file) {\n    const reader = new FileReader();\n    reader.onload = function (readerEvent) {\n      const svgText = readerEvent.target.result;\n      const el = document.createElement(\"html\");\n      el.innerHTML = svgText;\n      const g = el.querySelector(\"g\");\n\n      if (!g) {\n        $message = {type: \"error\", text: \"File must be prepared svg. Download template for guidance!\"};\n        selected = false;\n        return;\n      }\n\n      svg = g.outerHTML;\n    };\n    reader.readAsText(file);\n  }\n\n  function addCharge() {\n    name = camelize(name);\n\n    if (!name || document.getElementById(name)) {\n      $message = {type: \"error\", text: \"Name must be unique id!\"};\n      return;\n    }\n\n    if (!charges[category]) {\n      charges[category] = {};\n      charges.types[category] = 5;\n      charges.single[category] = 5;\n    }\n    charges[category][name] = 5;\n\n    const el = document.createElement(\"html\");\n    el.innerHTML = svg;\n    const image = el.querySelector(\"g\");\n    image.id = name;\n    defs.insertAdjacentHTML(\"beforeend\", image.outerHTML);\n\n    selected = false;\n    $state.vector = 0;\n  }\n\n  function downloadTemplate() {\n    fetch(\"charges/template.svg\").then(text => {\n      return text.blob().then(blob => {\n        const a = document.createElement(\"a\");\n        a.href = URL.createObjectURL(blob);\n        a.setAttribute(\"download\", \"armoriaChargeTemplate.txt\");\n        a.click();\n      });\n    });\n  }\n</script>\n\n<div id=vectorUpload\n  on:drop|preventDefault={onFile(getFilesFromDropEvent)}\n  on:dragover|preventDefault={() => (dragging = true)}\n  on:dragleave|preventDefault={() => (dragging = false)}>\n  <span on:click={() => $state.vector = 0} class=\"close\">&times;</span>\n  <div class=container>\n    {#if selected}\n      <div class=input>\n        <div class=label>SVG Markup:</div>\n        <textarea rows=10 cols=30 bind:value={svg}/>\n        \n        <div>\n          <button on:click={downloadTemplate}>Download Template</button>\n        </div>\n      </div>\n\n      <div class=exampleCOA>\n        <svg width=100% height=100% fill={color} viewBox=\"50 50 100 100\">{@html svg}</svg>\n      </div>\n\n      <div class=output>\n        <div>\n          <div class=label>Tincture:</div>\n          <select bind:value={color}>\n            {#each [\"argent\", \"or\", \"gules\", \"sable\", \"azure\", \"vert\", \"purpure\"] as tincture}\n              <option value={$colors[tincture]}>{tincture}</option>\n            {/each}\n          </select>\n        </div>\n\n        <div>\n          <div class=label>Name:</div>\n          <input placeholder=\"Charge name\" required bind:value={name}/>\n        </div>\n\n        <div>\n          <div class=label>Category:</div>\n          <select bind:value={category}>\n            <option value=uploaded selected>uploaded</option>\n            {#each categories as c}\n              <option value={c}>{c}</option>\n            {/each}\n          </select>\n        </div>\n\n        <div>\n          <button on:click={addCharge}>Add</button>\n          <button on:click={() => selected = false}>Cancel</button>\n        </div>\n      </div>\n    {:else}\n      <label class=dragging>\n        <slot {dragging}>\n          <div>Drag &amp; Drop image here or browse</div>\n        </slot>\n        <input type=file accept=\"image/svg, text/plain\" on:input={onFile(getFilesFromInputEvent)} />\n      </label>\n    {/if}\n  </div>\n</div>\n\n<style>\n  #vectorUpload {\n    height: 100%;\n    width: 100%;\n    position: fixed;\n    z-index: 1;\n    left: 0;\n    top: 0;\n    background-color: rgba(0, 0, 0, 0.9);\n    transition: 0.5s;\n    user-select: none;\n  }\n\n  .container {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: #ddd;\n    display: flex;\n    flex-flow: row;\n    align-items: center;\n    justify-content: center;\n  }\n\n  @media only screen and (orientation: portrait) {\n    .container {\n      flex-flow: column;\n    }\n  }\n\n  textarea {\n    font-size: .8em;\n    font-family: 'Courier New', Courier, monospace;\n  }\n\n  .container > div {\n    width: max-content;\n  }\n\n  .exampleCOA {\n    text-align: center;\n  }\n\n  input, select {\n    width: 10em;\n  }\n\n  input[type=\"file\"] {\n    display: none;\n  }\n\n  .close {\n    position: fixed;\n    top: 0em;\n    right: 0.5em;\n    font-size: 4em;\n    padding: 0.2em 0;\n    display: inline-block;\n    color: #ddd;\n  }\n\n  label:hover,\n  span:hover {\n    cursor: pointer;\n    color: #fff;\n  }\n\n  .dragging {\n    width: max-content;\n  }\n</style>\n","<script>\n  import {onMount} from 'svelte';\n  import {fly, fade} from 'svelte/transition';\n  import {message} from './stores.js';\n  const {text, type = \"info\", timeout = 4000} = $message;\n\n  onMount(async () => {\n    setTimeout(() => $message = null, timeout);\n  });\n\n  function hideMessage() {\n    $message = null;\n  }\n</script>\n\n<div class={type} in:fly={{y:200, duration: 500}} out:fade on:click={hideMessage}>\n  {text}\n</div>\n\n<style>\n  div {\n    position: absolute;\n    bottom: 0%;\n    left: 50%;\n    line-height: 1.4em;\n    padding: .8em;\n    transform: translate(-50%, -50%);\n    z-index: 99;\n    max-width: 80%;\n    width: max-content;\n    user-select: none;\n    background-color: #00000060;\n  }\n\n  .error {\n    color: #e90000;\n  }\n\n  .warn {\n    color: #dd7200;\n  }\n\n  .info {\n    color: #fff;\n  }\n</style>","<script>\n  import {colors, patterns} from \"./stores\";\n\n  let patternData = [];\n  $: {\n    patternData = [...new Set($patterns)].map(id => {\n      const [element, t1, t2, size] = id.split(\"-\");\n      const [type, charge] = element.split(\"_of_\");\n      const mod = getSizeModified(size);\n      return {id, type, t1, t2, mod, charge};\n    });\n  }\n\n  function getSizeModified(size) {\n    if (size === \"small\") return .5;\n    if (size === \"smaller\") return .25;\n    if (size === \"smallest\") return .125;\n    if (size === \"big\") return 2;\n    return 1;\n  }\n\n  const defs = document.getElementById(\"charges\");\n  async function getCharge(p) {\n    let html = \"\";\n    const internal = defs.querySelector(\"#\"+p.charge);\n\n    if (internal) {\n      html = internal.outerHTML;\n    } else {\n      const extSVG = await fetch(\"charges/\"+p.charge+\".svg\");\n      const text = await extSVG.text();\n      const el = document.createElement(\"html\");\n      el.innerHTML = text;\n      html = el.querySelector(\"g\").outerHTML;\n      defs.insertAdjacentHTML(\"beforeend\", html);\n    }\n    return html;\n  }\n</script>\n\n{#each patternData as p}\n  {#if p.type === \"semy\"}\n  <pattern id={p.id} width={.134 * p.mod} height={.1787 * p.mod} viewBox=\"0 0 150 200\" stroke=\"#000\">\n    <rect x=0 y=0 width=150 height=200 fill={$colors[p.t1]} stroke=\"none\"/>\n    <g fill={$colors[p.t2]}>\n      {#await getCharge(p) then charge}\n        <g transform=\"translate(-60,-50)\">{@html charge}</g>\n        <g transform=\"translate(10,50)\">{@html charge}</g>\n      {/await}\n    </g>\n  </pattern>\n  {:else if p.type === \"vair\"}\n    <pattern id={p.id} width={.125 * p.mod} height={.25 * p.mod} viewBox=\"0 0 25 50\" stroke=\"#000\" stroke-width=.2>\n      <rect x=0 y=0 width=25 height=25 fill={$colors[p.t2]} stroke=\"none\"/>\n      <path d=\"m12.5,0 l6.25,6.25 v12.5 l6.25,6.25 h-25 l6.25,-6.25 v-12.5 z\" fill={$colors[p.t1]}/>\n      <rect x=0 y=25 width=25 height=25 fill={$colors[p.t1]} stroke-width=1 stroke=\"none\"/>\n      <path d=\"m25,25 l-6.25,6.25 v12.5 l-6.25,6.25 l-6.25,-6.25 v-12.5 l-6.25,-6.25 z\" fill={$colors[p.t2]}/>\n    </pattern>\n  {:else if p.type === \"vairInPale\"}\n    <pattern id={p.id} width={.125 * p.mod} height={.125 * p.mod} viewBox=\"0 0 25 25\">\n      <rect x=0 y=0 width=200 height=200 fill={$colors[p.t2]}/>\n      <path d=\"m12.5,0 l6.25,6.25 v12.5 l6.25,6.25 h-25 l6.25,-6.25 v-12.5 z\" fill={$colors[p.t1]} stroke=\"#000\" stroke-width=\".2\"/>\n    </pattern>\n  {:else if p.type === \"vairEnPointe\"}\n    <pattern id={p.id} width={.125 * p.mod} height={.25 * p.mod} viewBox=\"0 0 25 50\">\n      <rect x=0 y=0 width=25 height=25 fill={$colors[p.t2]}/>\n      <path d=\"m12.5,0 l6.25,6.25 v12.5 l6.25,6.25 h-25 l6.25,-6.25 v-12.5 z\" fill={$colors[p.t1]}/>\n      <rect x=0 y=25 width=25 height=25 fill={$colors[p.t1]} stroke-width=1 stroke={$colors[p.t1]}/>\n      <path d=\"m12.5,25 l6.25,6.25 v12.5 l6.25,6.25 h-25 l6.25,-6.25 v-12.5 z\" fill={$colors[p.t2]}/>\n    </pattern>\n  {:else if p.type === \"ermine\"}\n    <pattern id={p.id} width={.125 * p.mod} height={.125 * p.mod} viewBox=\"0 0 25 25\" fill={$colors[p.t2]}>\n      <rect x=0 y=0 width=25 height=25 fill={$colors[p.t1]}/>\n      <path d=\"m19.1,14.8 c-0.7,2.9 -2.1,5 -3.5,6.5 0.6,-0.1 1.3,-0.6 2,-0.9 -0.4,0.8 -0.8,1.4 -1.2,2.1 0.2,-0.1 1,-0.8 2,-1.8 0.2,1.4 0.4,2.9 0.7,3.9 0.3,-0.9 0.5,-2.5 0.7,-3.9 0.6,0.6 1.2,1.3 2.1,1.8 l -1.2,-2.2 c 0.6,0.3 1.3,0.8 1.9,1 -1.5,-1.6 -2.8,-3.6 -3.5,-6.5z\"/>\n      <path d=\"m16.1,14.9 c-0.1,-0.2 -1,0.4 -1.5,-0.8 1.2,1.1 2.5,-1.2 3.5,0.4 0.3,0.7 -1.1,1.8 -2,0.4z\"/>\n      <path d=\"m21.9,14.9 c.1,-.2 1,0.4 1.5,-0.8 -1.2,1.1 -2.5,-1.2 -3.5,0.4 -0.3,0.7 1.1,1.8 2,0.4z\"/>\n      <path d=\"m19.4,12.4 c-0.2,-0.1 0.7,-0.7 -0.6,-1.4 1.1,1.2 -2,1.7 -0.3,2.9 0.7,0.4 2.4,-0.5 0.9,-1.5z\"/>\n      <path d=\"M5.8,4.6 C5.1,7.5 3.7,9.5 2.3,11 2.9,10.9 3.6,10.5 4.2,10.1 3.8,10.9 3.4,11.5 3,12.2 3.3,12.1 4,11.4 5.1,10.4 c 0.2,1.4 0.4,2.9 0.7,3.9 0.3,-0.9 0.5,-2.5 0.7,-3.9 0.6,0.6 1.2,1.3 2.1,1.8 L 7.3,10 c 0.6,0.3 1.3,0.8 1.9,1 C7.7,9.5 6.4,7.5 5.8,4.6Z\"/>\n      <path d=\"M2.9,4.7 C2.8,4.6 1.9,5.1 1.3,4 2.6,5.1 3.8,2.8 4.9,4.3 5.2,5 3.8,6.1 2.9,4.7Z\"/>\n      <path d=\"M8.6,4.7 C8.7,4.5 9.6,5.1 10.1,3.9 8.9,5.1 7.6,2.7 6.6,4.3 6.3,5 7.7,6.1 8.6,4.7Z\"/>\n      <path d=\"M6.1,2.2 C 5.9,2.1 6.8,1.5 5.5,0.8 6.6,2.1 3.5,2.6 5.2,3.7 5.9,4.1 7.6,3.3 6.1,2.2Z\"/>\n    </pattern>\n  {:else if p.type === \"chequy\"}\n    <pattern id={p.id} width={.25 * p.mod} height={.25 * p.mod} viewBox=\"0 0 50 50\" fill={$colors[p.t2]}>\n      <rect x=0 y=0 width=50 height=50 />\n      <rect x=0 y=0 width=25 height=25 fill={$colors[p.t1]}/>\n      <rect x=25 y=25 width=25 height=25 fill={$colors[p.t1]}/>\n    </pattern>\n  {:else if p.type === \"lozengy\"}\n    <pattern id={p.id} width={.125 * p.mod} height={.125 * p.mod} viewBox=\"0 0 50 50\">\n      <rect x=0 y=0 width=50 height=50 fill={$colors[p.t1]}/>\n      <polygon points=\"25,0 50,25 25,50 0,25\" fill={$colors[p.t2]}/>\n    </pattern>\n  {:else if p.type === \"fusily\"}\n    <pattern id={p.id} width={.125 * p.mod} height={.25 * p.mod} viewBox=\"0 0 50 100\">\n      <rect x=0 y=0 width=50 height=100 fill={$colors[p.t1]}/>\n      <polygon points=\"25,0 50,50 25,100 0,50\" fill={$colors[p.t2]}/>\n    </pattern>\n  {:else if p.type === \"pally\"}\n    <pattern id={p.id} width={.5 * p.mod} height={.125 * p.mod} viewBox=\"0 0 100 25\">\n      <rect x=0 y=0 width=100 height=25 fill={$colors[p.t1]}/>\n      <rect x=25 y=0 width=25 height=25 fill={$colors[p.t2]}/>\n      <rect x=75 y=0 width=25 height=25 fill={$colors[p.t2]}/>\n    </pattern>\n  {:else if p.type === \"barry\"}\n    <pattern id={p.id} width={.125 * p.mod} height={.5 * p.mod} viewBox=\"0 0 25 100\">\n      <rect x=0 y=0 width=25 height=100 fill={$colors[p.t2]}/>\n      <rect x=0 y=25 width=25 height=25 fill={$colors[p.t1]}/>\n      <rect x=0 y=75 width=25 height=25 fill={$colors[p.t1]}/>\n    </pattern>\n  {:else if p.type === \"gemelles\"}\n    <pattern id={p.id} width={.125 * p.mod} height={.5 * p.mod} viewBox=\"0 0 25 100\">\n      <rect x=0 y=0 width=25 height=100 fill={$colors[p.t2]}/>\n      <rect x=0 y=35 width=25 height=10 fill={$colors[p.t1]}/>\n      <rect x=0 y=55 width=25 height=10 fill={$colors[p.t1]}/>\n    </pattern>\n  {:else if p.type === \"bendy\"}\n    <pattern id={p.id} width={.36 * p.mod} height={.36 * p.mod} viewBox=\"0 0 50 50\" patternTransform=\"rotate(45)\">\n      <rect x=0 y=0 width=50 height=50 fill={$colors[p.t2]}/>\n      <line x1=0 y1=37.5 x2=50 y2=37.5 stroke={$colors[p.t1]} stroke-width=25 />\n    </pattern>\n  {:else if p.type === \"bendySinister\"}\n    <pattern id={p.id} width={.36 * p.mod} height={.36 * p.mod} viewBox=\"0 0 50 50\" patternTransform=\"rotate(-45)\">\n      <rect x=0 y=0 width=50 height=50 fill={$colors[p.t2]}/>\n      <line x1=0 y1=37.5 x2=50 y2=37.5 stroke={$colors[p.t1]} stroke-width=25 />\n    </pattern>\n  {:else if p.type === \"palyBendy\"}\n    <pattern id={p.id} width={.125 * p.mod} height={.25 * p.mod} viewBox=\"0 0 50 100\" patternTransform=\"translate(22,44) rotate(-26.5)\">\n      <rect x=0 y=0 width=50 height=100 fill={$colors[p.t1]}/>\n      <polygon points=\"25,0 50,50 25,100 0,50\" fill={$colors[p.t2]}/>\n    </pattern>\n  {:else if p.type === \"pappellony\"}\n    <pattern id={p.id} width={.125 * p.mod} height={.125 * p.mod} viewBox=\"0 0 100 100\">\n      <rect x=0 y=0 width=100 height=100 fill={$colors[p.t1]}/>\n      <circle cx=0 cy=51 r=45 stroke={$colors[p.t2]} fill={$colors[p.t1]} stroke-width=10></circle>\n      <circle cx=100 cy=51 r=45 stroke={$colors[p.t2]} fill={$colors[p.t1]} stroke-width=10></circle>\n      <circle cx=50 cy=1 r=45 stroke={$colors[p.t2]} fill={$colors[p.t1]} stroke-width=10></circle>\n    </pattern>\n  {:else if p.type === \"masoned\"}\n    <pattern id={p.id} width={.125 * p.mod} height={.125 * p.mod} viewBox=\"0 0 100 100\" fill=\"none\">\n      <rect x=0 y=0 width=100 height=100 fill={$colors[p.t1]}/>\n      <rect x=0 y=0 width=100 height=50 stroke={$colors[p.t2]} stroke-width=4 />\n      <line x1=50 y1=50 x2=50 y2=100 stroke={$colors[p.t2]} stroke-width=5 />\n    </pattern>\n  {:else if p.type === \"fretty\"}\n    <pattern id={p.id} width={.28 * p.mod} height={.28 * p.mod} viewBox=\"0 0 200 200\" patternTransform=\"translate(-19,21) rotate(45)\" stroke=\"#000\" stroke-width=2>\n      <rect x=0 y=0 width=200 height=200 stroke=\"none\" fill={$colors[p.t1]}/>\n      <rect x=0 y=35 width=200 height=30 stroke=\"none\" fill={$colors[p.t2]}/>\n      <rect x=0 y=135 width=200 height=30 stroke=\"none\" fill={$colors[p.t2]}/>\n      <rect x=35 y=0 width=30 height=200 stroke=\"none\" fill={$colors[p.t2]}/>\n      <rect x=135 y=0 width=30 height=200 stroke=\"none\" fill={$colors[p.t2]}/>\n      <line x1=0 y1=35 x2=35 y2=35 /><line x1=0 y1=65 x2=35 y2=65 />\n      <line x1=35 y1=165 x2=35 y2=200 /><line x1=65 y1=165 x2=65 y2=200 />\n      <line x1=135 y1=0 x2=135 y2=35 /><line x1=165 y1=0 x2=165 y2=35 />\n      <line x1=135 y1=65 x2=135 y2=200 /><line x1=165 y1=65 x2=165 y2=200 />\n      <line x1=35 y1=0 x2=35 y2=135 /><line x1=65 y1=0 x2=65 y2=135 />\n      <line x1=65 y1=35 x2=200 y2=35 /><line x1=65 y1=65 x2=200 y2=65 />\n      <line x1=0 y1=135 x2=135 y2=135 /><line x1=0 y1=165 x2=135 y2=165 />\n      <line x1=165 y1=135 x2=200 y2=135 /><line x1=165 y1=165 x2=200 y2=165 />\n    </pattern>\n  {/if}\n{/each}","<script>\n  import Navbar from './Navbar.svelte';\n  import About from './About.svelte';\n  import Editor from './Editor.svelte';\n  import Gallery from './Gallery.svelte';\n  import UploadRaster from './UploadRaster.svelte';\n  import UploadVector from './UploadVector.svelte';\n  import Message from './Message.svelte';\n  import Patterns from './Patterns.svelte';\n  import {generate} from './generator.js';\n  import {background, size, history, matrices, matrix, state, changes, message} from './stores.js';\n  import {download} from './download.js';\n\n  let n, w, h, gallery = [], coa, seed;\n  $: [n, w, h] = defineGallerySize($size);\n  $: {\n    const l = $history.length;\n\n    // reroll is clicked\n    if (!$matrices[$matrix]) {\n      if ($state.edit) {\n        // generate new coa\n        $matrices[$matrix] = $matrices[$matrix-1].slice();\n        $matrices[$matrix][$state.i] = l;\n      } else {\n        // reroll gallery\n        $matrices[$matrix] = Array.from({length: n}, (_, i) => l+i++);\n      }\n    }\n\n    // add additional coas to matrix if size is smaller\n    if (!$state.edit && $matrices[$matrix].length < n) {\n      const m = $matrices[$matrix];\n      $matrices[$matrix] = [...Array(n).keys()].map(i => m[i] !== undefined ? m[i] : l+i);\n    }\n\n    gallery = $matrices[$matrix].slice(0, n);\n\n    // on coa edit\n    if ($state.edit) {\n      $state.c = $matrices[$matrix][$state.i];\n      coa = $history[$state.c] || generate(seed || undefined);\n      seed = undefined; // use once\n      if (!$history[$state.c]) $history.push(coa);\n      changes.reset();\n    }\n  };\n\n  void function checkLoadParameters() {\n    const url = new URL(window.location.href);\n    const params = url.searchParams;\n\n    if (!params.has(\"coa\") && !params.has(\"seed\")) return;\n\n    // define coa or seed\n    if (params.get(\"coa\")) {\n      if (!validateJSON(params.get(\"coa\"))) return;\n\n      const coaParsed = JSON.parse(params.get(\"coa\"));\n      $history.push(coaParsed);\n    } else if (params.get(\"seed\")) {\n      seed = params.get(\"seed\");\n      if (!isNaN(+seed)) seed = +seed;\n    }\n\n    // open in edit mode\n    $state.edit = 1;\n    $matrices[0] = [0];\n  }();\n\n  function validateJSON(text) {\n    try {\n      JSON.parse(text);\n      return true;\n    } catch(e) {\n      console.error(e);\n      alert(\"Error: coa value is not valid\\r\\n\" + e.message + \"\\r\\n\" + text);\n      return false;\n    }\n  }\n\n  // define number and size of coas to display\n  function defineGallerySize(desiredSize) {\n    const width = window.innerWidth;\n    const height = window.innerHeight - 60;\n    const numberX = Math.ceil(width / desiredSize);\n    const w = Math.floor(width / numberX);\n    const numberY = Math.floor(height / w);\n    const h = Math.floor(height / numberY);\n    return [numberX * numberY, w, h];\n  }\n\n  // keyboard shortcuts\n  function handleKeydown(event) {\n    const code = event.code;\n    const reserved = [\"Backspace\", \"Enter\", \"KeyZ\", \"KeyX\", \"KeyD\", \"F1\", \"Escape\"];\n    if (!reserved.includes(code)) return;\n\n    const active = document.activeElement.tagName;\n    if (active === \"INPUT\" || active === \"SELECT\" || active === \"TEXTAREA\") return;\n\n    event.preventDefault();\n    if (code === \"Backspace\" && $matrix > 0) $matrix -= 1; else // Rollback\n    if (code === \"Enter\") $matrix += 1; else // Reroll\n    if (code === \"KeyZ\") changes.undo(); else // Undo\n    if (code === \"KeyX\") changes.redo(); else // Redo\n    if (code === \"KeyD\") download(); else // Download\n    if (code === \"F1\") $state.about = !$state.about; // About\n    if (code === \"Escape\") {$state.about = 0; $state.raster = 0; $state.vector = 0;} // Close Windows\n  }\n</script>\n\n<svelte:window on:keydown={handleKeydown}/>\n\n<main style=\"background-color: {$background}\">\n  <Navbar/>\n  {#if $state.about}<About/>{/if}\n  {#if $state.raster}<UploadRaster/>{/if}\n  {#if $state.vector}<UploadVector/>{/if}\n  {#if $state.edit}<Editor {coa} c={$state.c}/>\n  {:else}<Gallery {gallery} {w} {h}/>{/if}\n  <button on:click={() => $message = {type: \"error\", text: \"Error message!\"}}>Error</button>\n  <button on:click={() => $message = {type: \"warn\", text: \"Warn message!\"}}>Warn</button>\n  <button on:click={() => $message = {type: \"info\", text: \"Info message!\"}}>Info</button>\n\n  {#if $message}<Message/>{/if}\n  <div id=\"patterns\" style=\"position: absolute\">\n    <svg width=0 height=0 xmlns=\"http://www.w3.org/2000/svg\">\n      <defs><Patterns/></defs>\n    </svg>\n  </div>\n</main>\n\n<style>\n  main {\n    background-image: url(\"data:image/svg+xml,%3Csvg width='84' height='84' viewBox='0 0 84 84' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none'%3E%3Cg fill='%23222' fill-opacity='.2'%3E%3Cpath d='M84 23c-4.417 0-8-3.584-8-7.998V8h-7.002C64.58 8 61 4.42 61 0H23c0 4.417-3.584 8-7.998 8H8v7.002C8 19.42 4.42 23 0 23v38c4.417 0 8 3.584 8 7.998V76h7.002C19.42 76 23 79.58 23 84h38c0-4.417 3.584-8 7.998-8H76v-7.002C76 64.58 79.58 61 84 61V23zM59.05 83H43V66.95c5.054-.5 9-4.764 9-9.948V52h5.002c5.18 0 9.446-3.947 9.95-9H83v16.05c-5.054.5-9 4.764-9 9.948V74h-5.002c-5.18 0-9.446 3.947-9.95 9zm-34.1 0H41V66.95c-5.053-.502-9-4.768-9-9.948V52h-5.002c-5.184 0-9.447-3.946-9.95-9H1v16.05c5.053.502 9 4.768 9 9.948V74h5.002c5.184 0 9.447 3.946 9.95 9zm0-82H41v16.05c-5.054.5-9 4.764-9 9.948V32h-5.002c-5.18 0-9.446 3.947-9.95 9H1V24.95c5.054-.5 9-4.764 9-9.948V10h5.002c5.18 0 9.446-3.947 9.95-9zm34.1 0H43v16.05c5.053.502 9 4.768 9 9.948V32h5.002c5.184 0 9.447 3.946 9.95 9H83V24.95c-5.053-.502-9-4.768-9-9.948V10h-5.002c-5.184 0-9.447-3.946-9.95-9zM50 50v7.002C50 61.42 46.42 65 42 65c-4.417 0-8-3.584-8-7.998V50h-7.002C22.58 50 19 46.42 19 42c0-4.417 3.584-8 7.998-8H34v-7.002C34 22.58 37.58 19 42 19c4.417 0 8 3.584 8 7.998V34h7.002C61.42 34 65 37.58 65 42c0 4.417-3.584 8-7.998 8H50z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n  }\n</style>\n\n","import App from './App.svelte';\n\nconst app = new App({\n  target: document.body,\n  props: {}\n});\n\nexport default app;\n"],"names":["noop","identity","x","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","get_store_value","value","_","component_subscribe","component","callback","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","tar","src","k","assign","slice","update_slot","slot","slot_definition","dirty","get_slot_changes_fn","get_slot_context_fn","slot_changes","lets","undefined","merged","len","Math","max","length","i","get_slot_changes","slot_context","p","null_to_empty","set_store_value","ret","set","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","run_tasks","task","c","delete","f","size","loop","promise","Promise","fulfill","add","[object Object]","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","call","this","attr","attribute","removeAttribute","getAttribute","setAttribute","to_number","set_data","wholeText","set_input_value","input","set_style","key","important","style","setProperty","select_option","select","option","__value","selected","select_value","selected_option","querySelector","toggle_class","toggle","classList","active_docs","current_component","active","create_rule","duration","delay","ease","uid","step","keyframes","t","rule","str","hash","charCodeAt","doc","ownerDocument","stylesheet","__svelte_stylesheet","head","sheet","current_rules","__svelte_rules","insertRule","cssRules","animation","delete_rule","previous","split","next","filter","anim","indexOf","deleted","join","deleteRule","clear","set_current_component","get_current_component","Error","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","resolve","update_scheduled","add_render_callback","add_flush_callback","flushing","seen_callbacks","flush","update","pop","has","fragment","before_update","after_update","wait","then","dispatch","direction","kind","dispatchEvent","type","detail","e","createEvent","initCustomEvent","custom_event","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","null_transition","create_in_transition","params","animation_name","config","running","cleanup","go","easing","tick","css","start_time","end_time","abort","started","create_bidirectional_transition","intro","running_program","pending_program","clear_animation","init","program","abs","start","end","group","handle_promise","info","token","index","resolved","child_ctx","current","needs_flush","blocks","m","mount","error","catch","hasCatch","pending","globals","globalThis","global","outro_and_destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","list","destroy","create_each_block","get_context","n","old_indexes","new_blocks","new_lookup","Map","deltas","get","will_move","did_move","first","new_block","old_block","new_key","old_key","bind","props","bound","create_component","mount_component","on_mount","new_on_destroy","map","destroy_component","make_dirty","fill","instance","create_fragment","not_equal","parent_component","prop_values","context","skip_bound","ready","rest","hydrate","nodes","Array","from","childNodes","children","l","SvelteComponent","$destroy","splice","$$props","obj","$$set","keys","tip","top","bottom","left","color","right","locked","localStorage","getItem","removeItem","cubicInOut","pow","cubicOut","fade","linear","getComputedStyle","opacity","fly","y","target_opacity","transform","od","u","slide","height","parseFloat","padding_top","paddingTop","padding_bottom","paddingBottom","margin_top","marginTop","margin_bottom","marginBottom","border_top_width","borderTopWidth","border_bottom_width","borderBottomWidth","min","draw","speed","getTotalLength","subscriber_queue","writable","stop","subscribers","new_value","run_queue","s","invalidate","subscriber","rw","object","array","floor","random","P","probability","camelize","replace","toUpperCase","stored","storedObj","JSON","parse","diaper","grad","shield","heater","oldFrench","spanish","french","swiss","wedged","italian","round","renaissance","baroque","polish","german","diamond","kite","square","vesicaPiscis","flag","gonfalon","colors","argent","or","gules","sable","azure","vert","purpure","border","borderWidth","background","scale","grid","showGrid","defineInitialOptions","history","matrices","matrix","state","edit","about","message","changes","position","reset","undo","redo","createChangesTracker","loadedCharges","patterns","async","download","coas","getElementById","querySelectorAll","width","numberX","innerWidth","numberY","ceil","scaleValue","canvas","getContext","fillStyle","fillRect","loaded","svg","url","clone","cloneNode","getElementsByTagName","gridPattern","remove","sh","gr","di","insertAdjacentHTML","defs","outerHTML","el","charge","fieldPattern","divisionPattern","serialized","XMLSerializer","serializeToString","blob","Blob","URL","createObjectURL","getURL","img","Image","onload","revokeObjectURL","drawImage","link","toBlob","console","log","href","body","click","setTimeout","drawCanvas","shields","paths","id","innerHTML","tinctures","defaultColors","wideScreen","icons","rollback","reroll","upload","back","lock","includes","setItem","$changes","$size","$grad","$diaper","$shield","stringify","$colors","$background","$scale","$border","$borderWidth","g","$matrix","$state","raster","vector","metal","t1","t2","division","perPale","perFess","perBend","perBendSinister","perCross","perChevron","perChevronReversed","perPile","perSaltire","gyronny","chevronny","innerHeight","drag","coa","currentTarget","a0","x0","y0","string","parseTransform","x1","y1","sizeAdj","closest","move","resize","rotate","cursor","once","angle","rad","PI","cosAngle","cos","sinAngle","sin","gridSize","dx","dy","relX","relY","shiftKey","ctrlKey","metaKey","templateId","lineId","template","line","getTemplate","ordinary","shieldPath","field","metals","colours","semy","vair","vairInPale","vairEnPointe","ermine","chequy","lozengy","fusily","pally","barry","gemelles","bendy","bendySinister","palyBendy","pappellony","masoned","fretty","positionsSelect","positions","conventional","abcdefgzi","beh","behdf","acegi","kn","bhdf","jeo","abc","jln","jlh","kmo","jleh","def","abcpqh","ABCDEFGHIJKL","complex","divisions","pq","jo","jl","jkl","gizgiz","lm","bcfdgh","jlmo","jj","dfk","dfkh","bdefh","mok","dfh","bh","df","ee","be","abceh","abcabc","ordinariesOn","pale","bb","fess","bar","defdefdef","fessCotissed","fessDoubleCotissed","defdef","bend","joe","bendSinister","lem","bendlet","joejoejoe","bendletSinister","lemlemlem","bordure","chief","quarter","jjj","canton","yyyy","cross","eeee","behdfbehdf","behbehbeh","crossParted","saltire","jlemo","saltireParted","pall","acez","jlhh","pallReversed","bemo","pile","pileInBend","eeoo","pileInBendSinister","eemm","ordinariesOff","yy","abcz","abcgzi","bgi","ach","gemelle","cg","cc","ai","aa","kenken","peqpeq","orle","emo","emoz","ez","terrace","bdf","point","acbdef","flaunches","qyron","acgi","BCKFEILGbdmfo","aczac","chevron","hh","chevronReversed","acdfgi","acac","label","defgzi","eh","defdefhmo","egiegi","pqn","inescutcheonHeater","inescutcheonOldFrench","inescutcheonSpanish","mascle","pqe","eknpq","lionRampant","lionPassant","wolfPassant","greyhoundСourant","griffinRampant","griffinPassant","boarRampant","eagle","raven","wyvern","garb","lme","crown","hand","lines","straight","wavy","engrailed","invecked","rayonne","embattled","raguly","urdy","dancetty","indented","dentilly","bevilled","angled","flechy","barby","enclavy","escartely","arched","archedReversed","nowy","nowyReversed","embattledGhibellin","embattledNotched","embattledGrady","dovetailedIndented","dovetailed","potenty","potentyDexter","potentySinister","nebuly","seaWaves","dragonTeeth","firTrees","variants","ordinaries","lined","gore","piles","pilesInPoint","charges","types","crosses","animals","birds","aquatic","fantastic","plants","agriculture","arms","bodyparts","miscellaneous","inescutcheon","single","lozenge","fusil","rustre","lozengeFaceted","lozengePloye","roundel","annulet","mullet","mulletPierced","mulletFaceted","mullet4","mullet6","mullet6Pierced","mullet6Faceted","mullet7","mullet8","mullet10","estoile","billet","triangle","trianglePierced","goutte","heart","pique","trefle","сarreau","fleurDeLis","sun","sunInSplendour","crescent","fountain","compassRose","crossHummetty","crossVoided","crossPattee","crossPotent","crossClechy","crosslet","crossBottony","crossFleury","crossPatonce","crossPommy","crossGamma","crossArrowed","crossFitchy","crossCercelee","crossMoline","crossFourchy","crossAvellane","crossErminee","crossMaltese","crossCeltic","crossOccitan","crossSaltire","crossTau","horseRampant","horseSalient","bullPassant","bullHeadCaboshed","deerHeadCaboshed","dragonPassant","eagleTwoHeards","unicornRampant","pegasus","serpent","cock","parrot","swan","swanErased","heron","cinquefoil","rose","escallop","pike","cancer","sword","hatchet","lochaberAxe","mallet","buckle","bugleHorn","horseshoe","stagsAttires","cowHorns","wing","wingSword","lute","harp","wheel","boat","natural","sinister","reversed","h","z","j","q","A","B","C","D","K","E","J","F","I","G","H","L","pennon","guidon","banner","dovetail","pennant","shieldPositions","$loadedCharges","fetch","response","getClass","points","entries","divided","layer","w","tDiv","coaShield","coaDiaper","diaperType","getDieperType","strokeWidth","coaGrad","coaColors","no","tincture","$patterns","title","itemSize","updateSection","charAt","checked","$grid","$showGrid","els","generate","seed","seedrandom","pattern","getTincture","linedOrdinary","divisioned","selectCharge","ordinaryT","concat","allowCounter","p2","t3","p1","getSize","defineChargeAttributes","fields","RoT","base","getType","startWithMetal","replaceTincture","definePattern","cap","isRaster","showSection","panel","nextElementSibling","maxHeight","scrollHeight","tagName","ratio","coaSize","chargeTypes","ordinariesList","menu","change","defineMenuState","isPattern","isSemy","getSemyCharge","getChargeType","find","getSemyType","selectSecondTincture","getField","tSplit","getDivision","updateGrid","getOrdinary","getCharges","showPositions","$message","timeout","attibutes","item","с","gallery","regenerate","$history","$matrices","editCOA","getFilesFromInputEvent","getFilesFromDropEvent","dataTransfer","files","items","getAsFile","category","dragging","offsetX","offsetY","categories","getFilesFunction","file","match","reader","FileReader","readerEvent","dataURL","result","readAsDataURL","loadImage","image","downloadTemplate","svgText","readAsText","mod","patternData","getSizeModified","html","internal","extSVG","location","searchParams","alert","validateJSON","coaParsed","isNaN","desiredSize","defineGallerySize","code","activeElement"],"mappings":"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"}